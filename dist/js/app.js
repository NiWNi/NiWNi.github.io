"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},slideBuildings=document.querySelector("#Buildings"),slideClouds=document.querySelector("#Clouds"),slideRain=document.querySelector("#Rain"),cloudFive=document.querySelector("#Cloud5");function checkClass(){if(slideBuildings.classList.contains("buildings")){var t=window.getComputedStyle(slideBuildings);slideBuildings.style.transform=t.transform,slideBuildings.classList.remove("buildings"),slideClouds.classList.remove("clouds"),slideRain.classList.remove("rain"),cloudFive.classList.remove(".clouds")}else slideBuildings.style.transform="",slideBuildings.classList.add("buildings"),slideClouds.classList.add("clouds"),slideRain.classList.add("rain"),cloudFive.classList.add("clouds")}document.querySelector(".skyline").addEventListener("click",checkClass),slideBuildings.addEventListener("touch",checkClass);var navBar=document.querySelector(".navigation-list"),circleNav=document.querySelector(".circle-nav");function showHideNavBar(){return navBar.classList.contains("show-bar")?navBar.classList.remove("show-bar"):navBar.classList.add("show-bar")}circleNav.addEventListener("click",showHideNavBar);var liLinks=document.querySelectorAll(".navigation-list li");function addListenerToMenuLinks(t,i,e){for(var n=0;n<t.length;n++)t[n].addEventListener(i,e)}addListenerToMenuLinks(liLinks,"click",showHideNavBar),$(document).ready(function(){$("#hamburgerIcon").click(function(){$("#line1").toggleClass("active"),$("#line2").toggleClass("active"),$("#line3").toggleClass("active")}),$("a").on("click",function(t){if(""!==this.hash){t.preventDefault();var i=this.hash;$("html, body").animate({scrollTop:$(i).offset().top},800,function(){window.location.hash=i})}})});var TxtType=function(t,i,e){this.toRotate=i,this.el=t,this.loopNum=0,this.period=parseInt(e,10)||2e3,this.txt="",this.tick(),this.isDeleting=!1};TxtType.prototype.tick=function(){var t=this.loopNum%this.toRotate.length,i=this.toRotate[t];this.isDeleting?this.txt=i.substring(0,this.txt.length-1):this.txt=i.substring(0,this.txt.length+1),this.el.innerHTML='<span class="wrap">'+this.txt+"</span>";var e=this,n=200-100*Math.random();this.isDeleting&&(n/=2),this.isDeleting||this.txt!==i?this.isDeleting&&""===this.txt&&(this.isDeleting=!1,this.loopNum++,n=500):(n=this.period,this.isDeleting=!0),setTimeout(function(){e.tick()},n)},window.onload=function(){for(var t=document.getElementsByClassName("typewrite"),i=0;i<t.length;i++){var e=t[i].getAttribute("data-type"),n=t[i].getAttribute("data-period");e&&new TxtType(t[i],JSON.parse(e),n)}var o=document.createElement("style");o.type="text/css",o.innerHTML=".typewrite > .wrap { border-right: 0.08em solid #fff}",document.body.appendChild(o)},function(t,i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=i(require("jquery")):t.lightbox=i(t.jQuery)}(void 0,function(c){function t(t){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=c.extend({},this.constructor.defaults),this.option(t)}return t.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1,sanitizeTitle:!1},t.prototype.option=function(t){c.extend(this.options,t)},t.prototype.imageCountLabel=function(t,i){return this.options.albumLabel.replace(/%1/g,t).replace(/%2/g,i)},t.prototype.init=function(){var t=this;c(document).ready(function(){t.enable(),t.build()})},t.prototype.enable=function(){var i=this;c("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(t){return i.start(c(t.currentTarget)),!1})},t.prototype.build=function(){if(!(0<c("#lightbox").length)){var i=this;c('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(c("body")),this.$lightbox=c("#lightbox"),this.$overlay=c("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.$image=this.$lightbox.find(".lb-image"),this.$nav=this.$lightbox.find(".lb-nav"),this.containerPadding={top:parseInt(this.$container.css("padding-top"),10),right:parseInt(this.$container.css("padding-right"),10),bottom:parseInt(this.$container.css("padding-bottom"),10),left:parseInt(this.$container.css("padding-left"),10)},this.imageBorderWidth={top:parseInt(this.$image.css("border-top-width"),10),right:parseInt(this.$image.css("border-right-width"),10),bottom:parseInt(this.$image.css("border-bottom-width"),10),left:parseInt(this.$image.css("border-left-width"),10)},this.$overlay.hide().on("click",function(){return i.end(),!1}),this.$lightbox.hide().on("click",function(t){return"lightbox"===c(t.target).attr("id")&&i.end(),!1}),this.$outerContainer.on("click",function(t){return"lightbox"===c(t.target).attr("id")&&i.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===i.currentImageIndex?i.changeImage(i.album.length-1):i.changeImage(i.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return i.currentImageIndex===i.album.length-1?i.changeImage(0):i.changeImage(i.currentImageIndex+1),!1}),this.$nav.on("mousedown",function(t){3===t.which&&(i.$nav.css("pointer-events","none"),i.$lightbox.one("contextmenu",function(){setTimeout(function(){this.$nav.css("pointer-events","auto")}.bind(i),0)}))}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return i.end(),!1})}},t.prototype.start=function(t){var i=this,e=c(window);e.on("resize",c.proxy(this.sizeOverlay,this)),c("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var n=0;function o(t){i.album.push({alt:t.attr("data-alt"),link:t.attr("href"),title:t.attr("data-title")||t.attr("title")})}var a,s=t.attr("data-lightbox");if(s){a=c(t.prop("tagName")+'[data-lightbox="'+s+'"]');for(var r=0;r<a.length;r=++r)o(c(a[r])),a[r]===t[0]&&(n=r)}else if("lightbox"===t.attr("rel"))o(t);else{a=c(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var h=0;h<a.length;h=++h)o(c(a[h])),a[h]===t[0]&&(n=h)}var l=e.scrollTop()+this.options.positionFromTop,d=e.scrollLeft();this.$lightbox.css({top:l+"px",left:d+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&c("html").addClass("lb-disable-scrolling"),this.changeImage(n)},t.prototype.changeImage=function(s){var r=this;this.disableKeyboardNav();var h=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),c(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var l=new Image;l.onload=function(){var t,i,e,n,o,a;h.attr({alt:r.album[s].alt,src:r.album[s].link}),c(l),h.width(l.width),h.height(l.height),r.options.fitImagesInViewport&&(a=c(window).width(),o=c(window).height(),n=a-r.containerPadding.left-r.containerPadding.right-r.imageBorderWidth.left-r.imageBorderWidth.right-20,e=o-r.containerPadding.top-r.containerPadding.bottom-r.imageBorderWidth.top-r.imageBorderWidth.bottom-120,r.options.maxWidth&&r.options.maxWidth<n&&(n=r.options.maxWidth),r.options.maxHeight&&r.options.maxHeight<n&&(e=r.options.maxHeight),(l.width>n||l.height>e)&&(l.width/n>l.height/e?(i=n,t=parseInt(l.height/(l.width/i),10)):(t=e,i=parseInt(l.width/(l.height/t),10)),h.width(i),h.height(t))),r.sizeContainer(h.width(),h.height())},l.src=this.album[s].link,this.currentImageIndex=s},t.prototype.sizeOverlay=function(){this.$overlay.width(c(document).width()).height(c(document).height())},t.prototype.sizeContainer=function(t,i){var e=this,n=this.$outerContainer.outerWidth(),o=this.$outerContainer.outerHeight(),a=t+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right,s=i+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;function r(){e.$lightbox.find(".lb-dataContainer").width(a),e.$lightbox.find(".lb-prevLink").height(s),e.$lightbox.find(".lb-nextLink").height(s),e.showImage()}n!==a||o!==s?this.$outerContainer.animate({width:a,height:s},this.options.resizeDuration,"swing",function(){r()}):r()},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn(this.options.imageFadeDuration),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var t=!1;try{document.createEvent("TouchEvent"),t=!!this.options.alwaysShowNavOnTouchDevices}catch(t){}this.$lightbox.find(".lb-nav").show(),1<this.album.length&&(this.options.wrapAround?(t&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(0<this.currentImageIndex&&(this.$lightbox.find(".lb-prev").show(),t&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),t&&this.$lightbox.find(".lb-next").css("opacity","1"))))},t.prototype.updateDetails=function(){var t=this;if(void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title){var i=this.$lightbox.find(".lb-caption");this.options.sanitizeTitle?i.text(this.album[this.currentImageIndex].title):i.html(this.album[this.currentImageIndex].title),i.fadeIn("fast").find("a").on("click",function(t){void 0!==c(this).attr("target")?window.open(c(this).attr("href"),c(this).attr("target")):location.href=c(this).attr("href")})}if(1<this.album.length&&this.options.showImageNumberLabel){var e=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(e).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return t.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link);0<this.currentImageIndex&&((new Image).src=this.album[this.currentImageIndex-1].link)},t.prototype.enableKeyboardNav=function(){c(document).on("keyup.keyboard",c.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){c(document).off(".keyboard")},t.prototype.keyboardAction=function(t){var i=t.keyCode,e=String.fromCharCode(i).toLowerCase();27===i||e.match(/x|o|c/)?this.end():"p"===e||37===i?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&1<this.album.length&&this.changeImage(this.album.length-1):"n"!==e&&39!==i||(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&1<this.album.length&&this.changeImage(0))},t.prototype.end=function(){this.disableKeyboardNav(),c(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),c("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&c("html").removeClass("lb-disable-scrolling")},new t});_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=i(require("jquery")):t.lightbox=i(t.jQuery)}(void 0,function(c){function t(t){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=c.extend({},this.constructor.defaults),this.option(t)}return t.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1,sanitizeTitle:!1},t.prototype.option=function(t){c.extend(this.options,t)},t.prototype.imageCountLabel=function(t,i){return this.options.albumLabel.replace(/%1/g,t).replace(/%2/g,i)},t.prototype.init=function(){var t=this;c(document).ready(function(){t.enable(),t.build()})},t.prototype.enable=function(){var i=this;c("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(t){return i.start(c(t.currentTarget)),!1})},t.prototype.build=function(){if(!(0<c("#lightbox").length)){var i=this;c('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(c("body")),this.$lightbox=c("#lightbox"),this.$overlay=c("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.$image=this.$lightbox.find(".lb-image"),this.$nav=this.$lightbox.find(".lb-nav"),this.containerPadding={top:parseInt(this.$container.css("padding-top"),10),right:parseInt(this.$container.css("padding-right"),10),bottom:parseInt(this.$container.css("padding-bottom"),10),left:parseInt(this.$container.css("padding-left"),10)},this.imageBorderWidth={top:parseInt(this.$image.css("border-top-width"),10),right:parseInt(this.$image.css("border-right-width"),10),bottom:parseInt(this.$image.css("border-bottom-width"),10),left:parseInt(this.$image.css("border-left-width"),10)},this.$overlay.hide().on("click",function(){return i.end(),!1}),this.$lightbox.hide().on("click",function(t){return"lightbox"===c(t.target).attr("id")&&i.end(),!1}),this.$outerContainer.on("click",function(t){return"lightbox"===c(t.target).attr("id")&&i.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===i.currentImageIndex?i.changeImage(i.album.length-1):i.changeImage(i.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return i.currentImageIndex===i.album.length-1?i.changeImage(0):i.changeImage(i.currentImageIndex+1),!1}),this.$nav.on("mousedown",function(t){3===t.which&&(i.$nav.css("pointer-events","none"),i.$lightbox.one("contextmenu",function(){setTimeout(function(){this.$nav.css("pointer-events","auto")}.bind(i),0)}))}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return i.end(),!1})}},t.prototype.start=function(t){var i=this,e=c(window);e.on("resize",c.proxy(this.sizeOverlay,this)),c("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var n=0;function o(t){i.album.push({alt:t.attr("data-alt"),link:t.attr("href"),title:t.attr("data-title")||t.attr("title")})}var a,s=t.attr("data-lightbox");if(s){a=c(t.prop("tagName")+'[data-lightbox="'+s+'"]');for(var r=0;r<a.length;r=++r)o(c(a[r])),a[r]===t[0]&&(n=r)}else if("lightbox"===t.attr("rel"))o(t);else{a=c(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var h=0;h<a.length;h=++h)o(c(a[h])),a[h]===t[0]&&(n=h)}var l=e.scrollTop()+this.options.positionFromTop,d=e.scrollLeft();this.$lightbox.css({top:l+"px",left:d+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&c("html").addClass("lb-disable-scrolling"),this.changeImage(n)},t.prototype.changeImage=function(s){var r=this;this.disableKeyboardNav();var h=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),c(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var l=new Image;l.onload=function(){var t,i,e,n,o,a;h.attr({alt:r.album[s].alt,src:r.album[s].link}),c(l),h.width(l.width),h.height(l.height),r.options.fitImagesInViewport&&(a=c(window).width(),o=c(window).height(),n=a-r.containerPadding.left-r.containerPadding.right-r.imageBorderWidth.left-r.imageBorderWidth.right-20,e=o-r.containerPadding.top-r.containerPadding.bottom-r.imageBorderWidth.top-r.imageBorderWidth.bottom-120,r.options.maxWidth&&r.options.maxWidth<n&&(n=r.options.maxWidth),r.options.maxHeight&&r.options.maxHeight<n&&(e=r.options.maxHeight),(l.width>n||l.height>e)&&(l.width/n>l.height/e?(i=n,t=parseInt(l.height/(l.width/i),10)):(t=e,i=parseInt(l.width/(l.height/t),10)),h.width(i),h.height(t))),r.sizeContainer(h.width(),h.height())},l.src=this.album[s].link,this.currentImageIndex=s},t.prototype.sizeOverlay=function(){this.$overlay.width(c(document).width()).height(c(document).height())},t.prototype.sizeContainer=function(t,i){var e=this,n=this.$outerContainer.outerWidth(),o=this.$outerContainer.outerHeight(),a=t+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right,s=i+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;function r(){e.$lightbox.find(".lb-dataContainer").width(a),e.$lightbox.find(".lb-prevLink").height(s),e.$lightbox.find(".lb-nextLink").height(s),e.showImage()}n!==a||o!==s?this.$outerContainer.animate({width:a,height:s},this.options.resizeDuration,"swing",function(){r()}):r()},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn(this.options.imageFadeDuration),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var t=!1;try{document.createEvent("TouchEvent"),t=!!this.options.alwaysShowNavOnTouchDevices}catch(t){}this.$lightbox.find(".lb-nav").show(),1<this.album.length&&(this.options.wrapAround?(t&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(0<this.currentImageIndex&&(this.$lightbox.find(".lb-prev").show(),t&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),t&&this.$lightbox.find(".lb-next").css("opacity","1"))))},t.prototype.updateDetails=function(){var t=this;if(void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title){var i=this.$lightbox.find(".lb-caption");this.options.sanitizeTitle?i.text(this.album[this.currentImageIndex].title):i.html(this.album[this.currentImageIndex].title),i.fadeIn("fast").find("a").on("click",function(t){void 0!==c(this).attr("target")?window.open(c(this).attr("href"),c(this).attr("target")):location.href=c(this).attr("href")})}if(1<this.album.length&&this.options.showImageNumberLabel){var e=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(e).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return t.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link);0<this.currentImageIndex&&((new Image).src=this.album[this.currentImageIndex-1].link)},t.prototype.enableKeyboardNav=function(){c(document).on("keyup.keyboard",c.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){c(document).off(".keyboard")},t.prototype.keyboardAction=function(t){var i=t.keyCode,e=String.fromCharCode(i).toLowerCase();27===i||e.match(/x|o|c/)?this.end():"p"===e||37===i?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&1<this.album.length&&this.changeImage(this.album.length-1):"n"!==e&&39!==i||(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&1<this.album.length&&this.changeImage(0))},t.prototype.end=function(){this.disableKeyboardNav(),c(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),c("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&c("html").removeClass("lb-disable-scrolling")},new t});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImxpZ2h0Ym94LmpzIl0sIm5hbWVzIjpbInNsaWRlQnVpbGRpbmdzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic2xpZGVDbG91ZHMiLCJzbGlkZVJhaW4iLCJjbG91ZEZpdmUiLCJzdHlsZSIsInRyYW5zZm9ybSIsImNvbXB1dGVkU3R5bGUiLCJjaGVja0NsYXNzIiwicmVtb3ZlIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJ3aW5kb3ciLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwic2hvd0hpZGVOYXZCYXIiLCJuYXZCYXIiLCJjaXJjbGVOYXYiLCJsaUxpbmtzIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZExpc3RlbmVyVG9NZW51TGlua3MiLCJsaXN0IiwiZXZlbnQiLCJoYW5kbGVyIiwiaSIsImxlbmd0aCIsIiQiLCJyZWFkeSIsInRvZ2dsZUNsYXNzIiwiY2xpY2siLCJvbiIsInRoaXMiLCJoYXNoIiwicHJldmVudERlZmF1bHQiLCJhbmltYXRlIiwic2Nyb2xsVG9wIiwib2Zmc2V0IiwidG9wIiwiVHh0VHlwZSIsImVsIiwidG9Sb3RhdGUiLCJwZXJpb2QiLCJsb29wTnVtIiwicGFyc2VJbnQiLCJ0eHQiLCJ0aWNrIiwiaXNEZWxldGluZyIsImZ1bGxUeHQiLCJwcm90b3R5cGUiLCJzdWJzdHJpbmciLCJpbm5lckhUTUwiLCJ0aGF0IiwiZGVsdGEiLCJNYXRoIiwicmFuZG9tIiwic2V0VGltZW91dCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJlbGVtZW50cyIsImdldEF0dHJpYnV0ZSIsImNzcyIsIkpTT04iLCJ0eXBlIiwiYm9keSIsImFwcGVuZENoaWxkIiwicm9vdCIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJtb2R1bGUiLCJleHBvcnRzIiwicmVxdWlyZSIsImxpZ2h0Ym94IiwialF1ZXJ5IiwidW5kZWZpbmVkIiwiYWxidW0iLCJjdXJyZW50SW1hZ2VJbmRleCIsImluaXQiLCJjb25zdHJ1Y3RvciIsImRlZmF1bHRzIiwib3B0aW9ucyIsIkxpZ2h0Ym94IiwiYWxidW1MYWJlbCIsImFsd2F5c1Nob3dOYXZPblRvdWNoRGV2aWNlcyIsImZhZGVEdXJhdGlvbiIsImZpdEltYWdlc0luVmlld3BvcnQiLCJpbWFnZUZhZGVEdXJhdGlvbiIsInNob3dJbWFnZU51bWJlckxhYmVsIiwid3JhcEFyb3VuZCIsInBvc2l0aW9uRnJvbVRvcCIsInNhbml0aXplVGl0bGUiLCJvcHRpb24iLCJjdXJyZW50SW1hZ2VOdW0iLCJ0b3RhbEltYWdlcyIsImV4dGVuZCIsInJlcGxhY2UiLCJpbWFnZUNvdW50TGFiZWwiLCJzZWxmIiwiZW5hYmxlIiwic3RhcnQiLCJjdXJyZW50VGFyZ2V0IiwiYnVpbGQiLCJhcHBlbmRUbyIsIiRvdmVybGF5IiwiJG91dGVyQ29udGFpbmVyIiwiJGxpZ2h0Ym94IiwiZmluZCIsIiRjb250YWluZXIiLCIkaW1hZ2UiLCIkbmF2IiwicmlnaHQiLCJib3R0b20iLCJsZWZ0IiwiY29udGFpbmVyUGFkZGluZyIsImltYWdlQm9yZGVyV2lkdGgiLCJlbmQiLCJoaWRlIiwidGFyZ2V0IiwiYXR0ciIsImNoYW5nZUltYWdlIiwid2hpY2giLCJvbmUiLCJiaW5kIiwiJGxpbmsiLCIkd2luZG93IiwicHJveHkiLCJzaXplT3ZlcmxheSIsInZpc2liaWxpdHkiLCJpbWFnZU51bWJlciIsImFkZFRvQWxidW0iLCJwdXNoIiwibGluayIsInRpdGxlIiwiJGxpbmtzIiwiZGF0YUxpZ2h0Ym94VmFsdWUiLCJwcm9wIiwiaiIsInNjcm9sbExlZnQiLCJmYWRlSW4iLCJkaXNhYmxlU2Nyb2xsaW5nIiwiYWRkQ2xhc3MiLCJkaXNhYmxlS2V5Ym9hcmROYXYiLCJwcmVsb2FkZXIiLCJJbWFnZSIsImltYWdlSGVpZ2h0IiwiJHByZWxvYWRlciIsImltYWdlV2lkdGgiLCJtYXhJbWFnZVdpZHRoIiwiYWx0Iiwid2luZG93SGVpZ2h0Iiwic3JjIiwid2luZG93V2lkdGgiLCJ3aWR0aCIsImhlaWdodCIsIm1heEltYWdlSGVpZ2h0IiwibWF4SGVpZ2h0IiwibWF4V2lkdGgiLCJvbGRXaWR0aCIsIm91dGVyV2lkdGgiLCJzaXplQ29udGFpbmVyIiwib3V0ZXJIZWlnaHQiLCJuZXdIZWlnaHQiLCJvbGRIZWlnaHQiLCJuZXdXaWR0aCIsInNob3dJbWFnZSIsInBvc3RSZXNpemUiLCJzdG9wIiwiZW5hYmxlS2V5Ym9hcmROYXYiLCJ1cGRhdGVOYXYiLCJjcmVhdGVFdmVudCIsImFsd2F5c1Nob3dOYXYiLCJzaG93IiwiZSIsInVwZGF0ZURldGFpbHMiLCIkY2FwdGlvbiIsInRleHQiLCJodG1sIiwibGFiZWxUZXh0IiwicmVtb3ZlQ2xhc3MiLCJyZXNpemVEdXJhdGlvbiIsInByZWxvYWROZWlnaGJvcmluZ0ltYWdlcyIsInByZWxvYWRQcmV2Iiwia2V5Ym9hcmRBY3Rpb24iLCJLRVlDT0RFX0VTQyIsImtleUNvZGUiLCJLRVlDT0RFX0xFRlRBUlJPVyIsImtleWNvZGUiLCJ0b0xvd2VyQ2FzZSIsIktFWUNPREVfUklHSFRBUlJPVyIsImtleSIsIm1hdGNoIiwiU3RyaW5nIiwib2ZmIiwiZmFkZU91dCIsIl90eXBlb2YiLCJvbmxvYWQiLCJvcGVuIiwibG9jYXRpb24iLCJocmVmIiwiZnJvbUNoYXJDb2RlIl0sIm1hcHBpbmdzIjoibU9BQU1BLGVBQWlCQyxTQUFTQyxjQUFjLGNBQ3hDQyxZQUFjRixTQUFTQyxjQUFjLFdBQ3JDRSxVQUFZSCxTQUFTQyxjQUFjLFNBQ25DRyxVQUFZSixTQUFTQyxjQUFjLFdBRnpDLFNBQU1DLGFBQ04sR0FBTUMsZUFBWUgsVUFBU0MsU0FBYyxhQUF6QyxDQUNBLElBQU1HLEVBQVlKLE9BQVNDLGlCQUFjRixnQkFLdkNBLGVBQWVNLE1BQU1DLFVBQVlDLEVBQWNELFVBSGpEUCxlQUFTUyxVQUFhQyxPQUFBLGFBQ3JCUCxZQUFJSCxVQUFlVyxPQUFVQyxVQUM1QlIsVUFBSUksVUFBQUEsT0FBZ0JLLFFBQ3BCYixVQUFBQSxVQUFlTSxPQUFNQyxnQkFFckJKLGVBQVlRLE1BQUFBLFVBQWlCLEdBQzdC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dEosUUFHaEVpRCxFQUFTaEMsVUFBVTRGLG1CQUFxQixXQUN0Q2xILEVBQUUxQixVQUFVK0wsSUFBSSxjQUdsQi9HLEVBQVNoQyxVQUFVcUksZUFBaUIsU0FBUy9KLEdBQzNDLElBSUltSyxFQUFVbkssRUFBTWlLLFFBQ2hCSyxFQUFVRSxPQUFPUSxhQUFhYixHQUFTQyxjQUxsQixLQU1yQkQsR0FBMkJHLEVBQUlDLE1BQU0sU0FDdkM5SixLQUFLbUYsTUFDWSxNQUFSMEUsR0FQYyxLQU9DSCxFQUNPLElBQTNCMUosS0FBSzRDLGtCQUNQNUMsS0FBS3VGLFlBQVl2RixLQUFLNEMsa0JBQW9CLEdBQ2pDNUMsS0FBS2dELFFBQVFRLFlBQWtDLEVBQXBCeEQsS0FBSzJDLE1BQU1qRCxRQUMvQ00sS0FBS3VGLFlBQVl2RixLQUFLMkMsTUFBTWpELE9BQVMsR0FFdEIsTUFBUm1LLEdBWmMsS0FZQ0gsSUFDcEIxSixLQUFLNEMsb0JBQXNCNUMsS0FBSzJDLE1BQU1qRCxPQUFTLEVBQ2pETSxLQUFLdUYsWUFBWXZGLEtBQUs0QyxrQkFBb0IsR0FDakM1QyxLQUFLZ0QsUUFBUVEsWUFBa0MsRUFBcEJ4RCxLQUFLMkMsTUFBTWpELFFBQy9DTSxLQUFLdUYsWUFBWSxLQU12QnRDLEVBQVNoQyxVQUFVa0UsSUFBTSxXQUN2Qm5GLEtBQUs2RyxxQkFDTGxILEVBQUVkLFFBQVFtTCxJQUFJLFNBQVVoSyxLQUFLOEYsYUFDN0I5RixLQUFLeUUsVUFBVXdGLFFBQVFqSyxLQUFLZ0QsUUFBUUksY0FDcENwRCxLQUFLdUUsU0FBUzBGLFFBQVFqSyxLQUFLZ0QsUUFBUUksY0FDbkN6RCxFQUFFLHlCQUF5QmlDLElBQUksQ0FDN0JtRSxXQUFZLFlBRVYvRixLQUFLZ0QsUUFBUTJELGtCQUNmaEgsRUFBRSxRQUFRdUosWUFBWSx5QkFJbkIsSUFBSWpHIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNsaWRlQnVpbGRpbmdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI0J1aWxkaW5ncycpO1xuY29uc3Qgc2xpZGVDbG91ZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjQ2xvdWRzJyk7XG5jb25zdCBzbGlkZVJhaW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjUmFpbicpO1xuY29uc3QgY2xvdWRGaXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI0Nsb3VkNScpO1xuXG5mdW5jdGlvbiBjaGVja0NsYXNzKCkge1xuXHRpZiAoc2xpZGVCdWlsZGluZ3MuY2xhc3NMaXN0LmNvbnRhaW5zKCdidWlsZGluZ3MnKSkge1xuXHRcdGxldCBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoc2xpZGVCdWlsZGluZ3MpO1xuXHRcdHNsaWRlQnVpbGRpbmdzLnN0eWxlLnRyYW5zZm9ybSA9IGNvbXB1dGVkU3R5bGUudHJhbnNmb3JtO1xuXHRcdHNsaWRlQnVpbGRpbmdzLmNsYXNzTGlzdC5yZW1vdmUoJ2J1aWxkaW5ncycpO1xuXHRcdHNsaWRlQ2xvdWRzLmNsYXNzTGlzdC5yZW1vdmUoJ2Nsb3VkcycpO1xuXHRcdHNsaWRlUmFpbi5jbGFzc0xpc3QucmVtb3ZlKCdyYWluJyk7XG5cdFx0Y2xvdWRGaXZlLmNsYXNzTGlzdC5yZW1vdmUoJy5jbG91ZHMnKTtcblx0fSBlbHNlIHtcblx0XHRzbGlkZUJ1aWxkaW5ncy5zdHlsZS50cmFuc2Zvcm0gPSAnJztcblx0XHRzbGlkZUJ1aWxkaW5ncy5jbGFzc0xpc3QuYWRkKCdidWlsZGluZ3MnKTtcblx0XHRzbGlkZUNsb3Vkcy5jbGFzc0xpc3QuYWRkKCdjbG91ZHMnKTtcblx0XHRzbGlkZVJhaW4uY2xhc3NMaXN0LmFkZCgncmFpbicpO1xuXHRcdGNsb3VkRml2ZS5jbGFzc0xpc3QuYWRkKCdjbG91ZHMnKTtcblx0fVxufVxuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2t5bGluZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hlY2tDbGFzcyk7XG5zbGlkZUJ1aWxkaW5ncy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaCcsIGNoZWNrQ2xhc3MpO1xuXG4vLyBTaG93IG5hdmlnYXRpb24gYmFyIG9uIHNtYWxsIHNjcmVlbnNcbmNvbnN0IG5hdkJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXZpZ2F0aW9uLWxpc3QnKTtcbmNvbnN0IGNpcmNsZU5hdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaXJjbGUtbmF2Jyk7XG5cbmZ1bmN0aW9uIHNob3dIaWRlTmF2QmFyKCkge1xuXHRpZiAobmF2QmFyLmNsYXNzTGlzdC5jb250YWlucygnc2hvdy1iYXInKSkge1xuXHRcdHJldHVybiBuYXZCYXIuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdy1iYXInKTtcblx0fSBlbHNlIHtcblx0XHRyZXR1cm4gbmF2QmFyLmNsYXNzTGlzdC5hZGQoJ3Nob3ctYmFyJyk7XG5cdH1cbn1cblxuY2lyY2xlTmF2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2hvd0hpZGVOYXZCYXIpO1xuXG4vLyBPbmNlIGNsaWNrIG9uIGxpbmsgY2xvc2UgbWVudSBiYXJcbmNvbnN0IGxpTGlua3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubmF2aWdhdGlvbi1saXN0IGxpJyk7XG5cbmZ1bmN0aW9uIGFkZExpc3RlbmVyVG9NZW51TGlua3MobGlzdCwgZXZlbnQsIGhhbmRsZXIpIHtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0bGlzdFtpXS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyKTtcblx0fVxufVxuXG5hZGRMaXN0ZW5lclRvTWVudUxpbmtzKGxpTGlua3MsICdjbGljaycsIHNob3dIaWRlTmF2QmFyKTtcblxuLy8gU21vb3RoIHNjcm9sbCBqcXVlcnlcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblx0JCgnI2hhbWJ1cmdlckljb24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG5cdFx0Ly90dXJucyBoYW1idXJnZXIgaWNvbiB0byBYIGFuZCBiYWNrXG5cdFx0JCgnI2xpbmUxJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRcdCQoJyNsaW5lMicpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcblx0XHQkKCcjbGluZTMnKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG5cdH0pO1xuXG5cdC8vIEFkZCBzbW9vdGggc2Nyb2xsaW5nIHRvIGFsbCBsaW5rc1xuXHQkKCdhJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhpcy5oYXNoIGhhcyBhIHZhbHVlIGJlZm9yZSBvdmVycmlkaW5nIGRlZmF1bHQgYmVoYXZpb3Jcblx0XHRpZiAodGhpcy5oYXNoICE9PSAnJykge1xuXHRcdFx0Ly8gUHJldmVudCBkZWZhdWx0IGFuY2hvciBjbGljayBiZWhhdmlvclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0Ly8gU3RvcmUgaGFzaFxuXHRcdFx0dmFyIGhhc2ggPSB0aGlzLmhhc2g7XG5cblx0XHRcdC8vIFVzaW5nIGpRdWVyeSdzIGFuaW1hdGUoKSBtZXRob2QgdG8gYWRkIHNtb290aCBwYWdlIHNjcm9sbFxuXHRcdFx0Ly8gVGhlIG9wdGlvbmFsIG51bWJlciAoODAwKSBzcGVjaWZpZXMgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdGFrZXMgdG8gc2Nyb2xsIHRvIHRoZSBzcGVjaWZpZWQgYXJlYVxuXHRcdFx0JCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xuXHRcdFx0XHRzY3JvbGxUb3A6ICQoaGFzaCkub2Zmc2V0KCkudG9wXG5cdFx0XHR9LCA4MDAsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0XHQvLyBBZGQgaGFzaCAoIykgdG8gVVJMIHdoZW4gZG9uZSBzY3JvbGxpbmcgKGRlZmF1bHQgY2xpY2sgYmVoYXZpb3IpXG5cdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gaGFzaDtcblx0XHRcdH0pO1xuXHRcdH0gLy8gRW5kIGlmXG5cdH0pO1xufSk7XG5cbi8vIFNuaXBwZXQgZm9yIHR5cGV3cml0dGVyIGVmZmVjdCBmcm9tIGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vc25pcHBldHMvY3NzL3R5cGV3cml0ZXItZWZmZWN0L1xudmFyIFR4dFR5cGUgPSBmdW5jdGlvbiAoZWwsIHRvUm90YXRlLCBwZXJpb2QpIHtcblx0dGhpcy50b1JvdGF0ZSA9IHRvUm90YXRlO1xuXHR0aGlzLmVsID0gZWw7XG5cdHRoaXMubG9vcE51bSA9IDA7XG5cdHRoaXMucGVyaW9kID0gcGFyc2VJbnQocGVyaW9kLCAxMCkgfHwgMjAwMDtcblx0dGhpcy50eHQgPSAnJztcblx0dGhpcy50aWNrKCk7XG5cdHRoaXMuaXNEZWxldGluZyA9IGZhbHNlO1xufTtcblxuVHh0VHlwZS5wcm90b3R5cGUudGljayA9IGZ1bmN0aW9uICgpIHtcblx0dmFyIGkgPSB0aGlzLmxvb3BOdW0gJSB0aGlzLnRvUm90YXRlLmxlbmd0aDtcblx0dmFyIGZ1bGxUeHQgPSB0aGlzLnRvUm90YXRlW2ldO1xuXG5cdGlmICh0aGlzLmlzRGVsZXRpbmcpIHtcblx0XHR0aGlzLnR4dCA9IGZ1bGxUeHQuc3Vic3RyaW5nKDAsIHRoaXMudHh0Lmxlbmd0aCAtIDEpO1xuXHR9IGVsc2Uge1xuXHRcdHRoaXMudHh0ID0gZnVsbFR4dC5zdWJzdHJpbmcoMCwgdGhpcy50eHQubGVuZ3RoICsgMSk7XG5cdH1cblxuXHR0aGlzLmVsLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz1cIndyYXBcIj4nICsgdGhpcy50eHQgKyAnPC9zcGFuPic7XG5cblx0dmFyIHRoYXQgPSB0aGlzO1xuXHR2YXIgZGVsdGEgPSAyMDAgLSBNYXRoLnJhbmRvbSgpICogMTAwO1xuXG5cdGlmICh0aGlzLmlzRGVsZXRpbmcpIHtcblx0XHRkZWx0YSAvPSAyO1xuXHR9XG5cblx0aWYgKCF0aGlzLmlzRGVsZXRpbmcgJiYgdGhpcy50eHQgPT09IGZ1bGxUeHQpIHtcblx0XHRkZWx0YSA9IHRoaXMucGVyaW9kO1xuXHRcdHRoaXMuaXNEZWxldGluZyA9IHRydWU7XG5cdH0gZWxzZSBpZiAodGhpcy5pc0RlbGV0aW5nICYmIHRoaXMudHh0ID09PSAnJykge1xuXHRcdHRoaXMuaXNEZWxldGluZyA9IGZhbHNlO1xuXHRcdHRoaXMubG9vcE51bSsrO1xuXHRcdGRlbHRhID0gNTAwO1xuXHR9XG5cblx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdFx0dGhhdC50aWNrKCk7XG5cdH0sIGRlbHRhKTtcbn07XG5cbndpbmRvdy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdHZhciBlbGVtZW50cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3R5cGV3cml0ZScpO1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIHRvUm90YXRlID0gZWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLXR5cGUnKTtcblx0XHR2YXIgcGVyaW9kID0gZWxlbWVudHNbaV0uZ2V0QXR0cmlidXRlKCdkYXRhLXBlcmlvZCcpO1xuXHRcdGlmICh0b1JvdGF0ZSkge1xuXHRcdFx0bmV3IFR4dFR5cGUoZWxlbWVudHNbaV0sIEpTT04ucGFyc2UodG9Sb3RhdGUpLCBwZXJpb2QpO1xuXHRcdH1cblx0fVxuXHQvLyBJTkpFQ1QgQ1NTXG5cdHZhciBjc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuXHRjc3MudHlwZSA9ICd0ZXh0L2Nzcyc7XG5cdGNzcy5pbm5lckhUTUwgPSAnLnR5cGV3cml0ZSA+IC53cmFwIHsgYm9yZGVyLXJpZ2h0OiAwLjA4ZW0gc29saWQgI2ZmZn0nO1xuXHRkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNzcyk7XG59O1xuLyohXG4gKiBMaWdodGJveCB2Mi4xMC4wXG4gKiBieSBMb2tlc2ggRGhha2FyXG4gKlxuICogTW9yZSBpbmZvOlxuICogaHR0cDovL2xva2VzaGRoYWthci5jb20vcHJvamVjdHMvbGlnaHRib3gyL1xuICpcbiAqIENvcHlyaWdodCAyMDA3LCAyMDE4IExva2VzaCBEaGFrYXJcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9naXRodWIuY29tL2xva2VzaC9saWdodGJveDIvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICpcbiAqIEBwcmVzZXJ2ZVxuICovXG5cbi8vIFVzZXMgTm9kZSwgQU1EIG9yIGJyb3dzZXIgZ2xvYmFscyB0byBjcmVhdGUgYSBtb2R1bGUuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICBkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gTm9kZS4gRG9lcyBub3Qgd29yayB3aXRoIHN0cmljdCBDb21tb25KUywgYnV0XG4gICAgLy8gb25seSBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB0aGF0IHN1cHBvcnQgbW9kdWxlLmV4cG9ydHMsXG4gICAgLy8gbGlrZSBOb2RlLlxuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gQnJvd3NlciBnbG9iYWxzIChyb290IGlzIHdpbmRvdylcbiAgICByb290LmxpZ2h0Ym94ID0gZmFjdG9yeShyb290LmpRdWVyeSk7XG4gIH1cbn0pKHRoaXMsIGZ1bmN0aW9uICgkKSB7XG5cbiAgZnVuY3Rpb24gTGlnaHRib3gob3B0aW9ucykge1xuICAgIHRoaXMuYWxidW0gPSBbXTtcbiAgICB0aGlzLmN1cnJlbnRJbWFnZUluZGV4ID0gdm9pZCAwO1xuICAgIHRoaXMuaW5pdCgpO1xuXG4gICAgLy8gb3B0aW9uc1xuICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRzKTtcbiAgICB0aGlzLm9wdGlvbihvcHRpb25zKTtcbiAgfVxuXG4gIC8vIERlc2NyaXB0aW9ucyBvZiBhbGwgb3B0aW9ucyBhdmFpbGFibGUgb24gdGhlIGRlbW8gc2l0ZTpcbiAgLy8gaHR0cDovL2xva2VzaGRoYWthci5jb20vcHJvamVjdHMvbGlnaHRib3gyL2luZGV4Lmh0bWwjb3B0aW9uc1xuICBMaWdodGJveC5kZWZhdWx0cyA9IHtcbiAgICBhbGJ1bUxhYmVsOiAnSW1hZ2UgJTEgb2YgJTInLFxuICAgIGFsd2F5c1Nob3dOYXZPblRvdWNoRGV2aWNlczogZmFsc2UsXG4gICAgZmFkZUR1cmF0aW9uOiA2MDAsXG4gICAgZml0SW1hZ2VzSW5WaWV3cG9ydDogdHJ1ZSxcbiAgICBpbWFnZUZhZGVEdXJhdGlvbjogNjAwLFxuICAgIC8vIG1heFdpZHRoOiA4MDAsXG4gICAgLy8gbWF4SGVpZ2h0OiA2MDAsXG4gICAgcG9zaXRpb25Gcm9tVG9wOiA1MCxcbiAgICByZXNpemVEdXJhdGlvbjogNzAwLFxuICAgIHNob3dJbWFnZU51bWJlckxhYmVsOiB0cnVlLFxuICAgIHdyYXBBcm91bmQ6IGZhbHNlLFxuICAgIGRpc2FibGVTY3JvbGxpbmc6IGZhbHNlLFxuICAgIC8qXG4gICAgU2FuaXRpemUgVGl0bGVcbiAgICBJZiB0aGUgY2FwdGlvbiBkYXRhIGlzIHRydXN0ZWQsIGZvciBleGFtcGxlIHlvdSBhcmUgaGFyZGNvZGluZyBpdCBpbiwgdGhlbiBsZWF2ZSB0aGlzIHRvIGZhbHNlLlxuICAgIFRoaXMgd2lsbCBmcmVlIHlvdSB0byBhZGQgaHRtbCB0YWdzLCBzdWNoIGFzIGxpbmtzLCBpbiB0aGUgY2FwdGlvbi5cbiAgICAgSWYgdGhlIGNhcHRpb24gZGF0YSBpcyB1c2VyIHN1Ym1pdHRlZCBvciBmcm9tIHNvbWUgb3RoZXIgdW50cnVzdGVkIHNvdXJjZSwgdGhlbiBzZXQgdGhpcyB0byB0cnVlXG4gICAgdG8gcHJldmVudCB4c3MgYW5kIG90aGVyIGluamVjdGlvbiBhdHRhY2tzLlxuICAgICAqL1xuICAgIHNhbml0aXplVGl0bGU6IGZhbHNlXG4gIH07XG5cbiAgTGlnaHRib3gucHJvdG90eXBlLm9wdGlvbiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgJC5leHRlbmQodGhpcy5vcHRpb25zLCBvcHRpb25zKTtcbiAgfTtcblxuICBMaWdodGJveC5wcm90b3R5cGUuaW1hZ2VDb3VudExhYmVsID0gZnVuY3Rpb24gKGN1cnJlbnRJbWFnZU51bSwgdG90YWxJbWFnZXMpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmFsYnVtTGFiZWwucmVwbGFjZSgvJTEvZywgY3VycmVudEltYWdlTnVtKS5yZXBsYWNlKC8lMi9nLCB0b3RhbEltYWdlcyk7XG4gIH07XG5cbiAgTGlnaHRib3gucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIC8vIEJvdGggZW5hYmxlIGFuZCBidWlsZCBtZXRob2RzIHJlcXVpcmUgdGhlIGJvZHkgdGFnIHRvIGJlIGluIHRoZSBET00uXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgc2VsZi5lbmFibGUoKTtcbiAgICAgIHNlbGYuYnVpbGQoKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBMb29wIHRocm91Z2ggYW5jaG9ycyBhbmQgYXJlYW1hcHMgbG9va2luZyBmb3IgZWl0aGVyIGRhdGEtbGlnaHRib3ggYXR0cmlidXRlcyBvciByZWwgYXR0cmlidXRlc1xuICAvLyB0aGF0IGNvbnRhaW4gJ2xpZ2h0Ym94Jy4gV2hlbiB0aGVzZSBhcmUgY2xpY2tlZCwgc3RhcnQgbGlnaHRib3guXG4gIExpZ2h0Ym94LnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnYVtyZWxePWxpZ2h0Ym94XSwgYXJlYVtyZWxePWxpZ2h0Ym94XSwgYVtkYXRhLWxpZ2h0Ym94XSwgYXJlYVtkYXRhLWxpZ2h0Ym94XScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgc2VsZi5zdGFydCgkKGV2ZW50LmN1cnJlbnRUYXJnZXQpKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBCdWlsZCBodG1sIGZvciB0aGUgbGlnaHRib3ggYW5kIHRoZSBvdmVybGF5LlxuICAvLyBBdHRhY2ggZXZlbnQgaGFuZGxlcnMgdG8gdGhlIG5ldyBET00gZWxlbWVudHMuIGNsaWNrIGNsaWNrIGNsaWNrXG4gIExpZ2h0Ym94LnByb3RvdHlwZS5idWlsZCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJCgnI2xpZ2h0Ym94JykubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAkKCc8ZGl2IGlkPVwibGlnaHRib3hPdmVybGF5XCIgY2xhc3M9XCJsaWdodGJveE92ZXJsYXlcIj48L2Rpdj48ZGl2IGlkPVwibGlnaHRib3hcIiBjbGFzcz1cImxpZ2h0Ym94XCI+PGRpdiBjbGFzcz1cImxiLW91dGVyQ29udGFpbmVyXCI+PGRpdiBjbGFzcz1cImxiLWNvbnRhaW5lclwiPjxpbWcgY2xhc3M9XCJsYi1pbWFnZVwiIHNyYz1cImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFBQVAvLy93QUFBQ0g1QkFFQUFBQUFMQUFBQUFBQkFBRUFBQUlDUkFFQU93PT1cIiAvPjxkaXYgY2xhc3M9XCJsYi1uYXZcIj48YSBjbGFzcz1cImxiLXByZXZcIiBocmVmPVwiXCIgPjwvYT48YSBjbGFzcz1cImxiLW5leHRcIiBocmVmPVwiXCIgPjwvYT48L2Rpdj48ZGl2IGNsYXNzPVwibGItbG9hZGVyXCI+PGEgY2xhc3M9XCJsYi1jYW5jZWxcIj48L2E+PC9kaXY+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cImxiLWRhdGFDb250YWluZXJcIj48ZGl2IGNsYXNzPVwibGItZGF0YVwiPjxkaXYgY2xhc3M9XCJsYi1kZXRhaWxzXCI+PHNwYW4gY2xhc3M9XCJsYi1jYXB0aW9uXCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwibGItbnVtYmVyXCI+PC9zcGFuPjwvZGl2PjxkaXYgY2xhc3M9XCJsYi1jbG9zZUNvbnRhaW5lclwiPjxhIGNsYXNzPVwibGItY2xvc2VcIj48L2E+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+JykuYXBwZW5kVG8oJCgnYm9keScpKTtcblxuICAgIC8vIENhY2hlIGpRdWVyeSBvYmplY3RzXG4gICAgdGhpcy4kbGlnaHRib3ggPSAkKCcjbGlnaHRib3gnKTtcbiAgICB0aGlzLiRvdmVybGF5ID0gJCgnI2xpZ2h0Ym94T3ZlcmxheScpO1xuICAgIHRoaXMuJG91dGVyQ29udGFpbmVyID0gdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLW91dGVyQ29udGFpbmVyJyk7XG4gICAgdGhpcy4kY29udGFpbmVyID0gdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLWNvbnRhaW5lcicpO1xuICAgIHRoaXMuJGltYWdlID0gdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLWltYWdlJyk7XG4gICAgdGhpcy4kbmF2ID0gdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLW5hdicpO1xuXG4gICAgLy8gU3RvcmUgY3NzIHZhbHVlcyBmb3IgZnV0dXJlIGxvb2t1cFxuICAgIHRoaXMuY29udGFpbmVyUGFkZGluZyA9IHtcbiAgICAgIHRvcDogcGFyc2VJbnQodGhpcy4kY29udGFpbmVyLmNzcygncGFkZGluZy10b3AnKSwgMTApLFxuICAgICAgcmlnaHQ6IHBhcnNlSW50KHRoaXMuJGNvbnRhaW5lci5jc3MoJ3BhZGRpbmctcmlnaHQnKSwgMTApLFxuICAgICAgYm90dG9tOiBwYXJzZUludCh0aGlzLiRjb250YWluZXIuY3NzKCdwYWRkaW5nLWJvdHRvbScpLCAxMCksXG4gICAgICBsZWZ0OiBwYXJzZUludCh0aGlzLiRjb250YWluZXIuY3NzKCdwYWRkaW5nLWxlZnQnKSwgMTApXG4gICAgfTtcblxuICAgIHRoaXMuaW1hZ2VCb3JkZXJXaWR0aCA9IHtcbiAgICAgIHRvcDogcGFyc2VJbnQodGhpcy4kaW1hZ2UuY3NzKCdib3JkZXItdG9wLXdpZHRoJyksIDEwKSxcbiAgICAgIHJpZ2h0OiBwYXJzZUludCh0aGlzLiRpbWFnZS5jc3MoJ2JvcmRlci1yaWdodC13aWR0aCcpLCAxMCksXG4gICAgICBib3R0b206IHBhcnNlSW50KHRoaXMuJGltYWdlLmNzcygnYm9yZGVyLWJvdHRvbS13aWR0aCcpLCAxMCksXG4gICAgICBsZWZ0OiBwYXJzZUludCh0aGlzLiRpbWFnZS5jc3MoJ2JvcmRlci1sZWZ0LXdpZHRoJyksIDEwKVxuICAgIH07XG5cbiAgICAvLyBBdHRhY2ggZXZlbnQgaGFuZGxlcnMgdG8gdGhlIG5ld2x5IG1pbnRlZCBET00gZWxlbWVudHNcbiAgICB0aGlzLiRvdmVybGF5LmhpZGUoKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLmVuZCgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgdGhpcy4kbGlnaHRib3guaGlkZSgpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgaWYgKCQoZXZlbnQudGFyZ2V0KS5hdHRyKCdpZCcpID09PSAnbGlnaHRib3gnKSB7XG4gICAgICAgIHNlbGYuZW5kKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICB0aGlzLiRvdXRlckNvbnRhaW5lci5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmICgkKGV2ZW50LnRhcmdldCkuYXR0cignaWQnKSA9PT0gJ2xpZ2h0Ym94Jykge1xuICAgICAgICBzZWxmLmVuZCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLXByZXYnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2VsZi5jdXJyZW50SW1hZ2VJbmRleCA9PT0gMCkge1xuICAgICAgICBzZWxmLmNoYW5nZUltYWdlKHNlbGYuYWxidW0ubGVuZ3RoIC0gMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLmNoYW5nZUltYWdlKHNlbGYuY3VycmVudEltYWdlSW5kZXggLSAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1uZXh0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNlbGYuY3VycmVudEltYWdlSW5kZXggPT09IHNlbGYuYWxidW0ubGVuZ3RoIC0gMSkge1xuICAgICAgICBzZWxmLmNoYW5nZUltYWdlKDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZi5jaGFuZ2VJbWFnZShzZWxmLmN1cnJlbnRJbWFnZUluZGV4ICsgMSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgICAvKlxuICAgICAgU2hvdyBjb250ZXh0IG1lbnUgZm9yIGltYWdlIG9uIHJpZ2h0LWNsaWNrXG4gICAgICAgVGhlcmUgaXMgYSBkaXYgY29udGFpbmluZyB0aGUgbmF2aWdhdGlvbiB0aGF0IHNwYW5zIHRoZSBlbnRpcmUgaW1hZ2UgYW5kIGxpdmVzIGFib3ZlIG9mIGl0LiBJZlxuICAgICAgeW91IHJpZ2h0LWNsaWNrLCB5b3UgYXJlIHJpZ2h0IGNsaWNraW5nIHRoaXMgZGl2IGFuZCBub3QgdGhlIGltYWdlLiBUaGlzIHByZXZlbnRzIHVzZXJzIGZyb21cbiAgICAgIHNhdmluZyB0aGUgaW1hZ2Ugb3IgdXNpbmcgb3RoZXIgY29udGV4dCBtZW51IGFjdGlvbnMgd2l0aCB0aGUgaW1hZ2UuXG4gICAgICAgVG8gZml4IHRoaXMsIHdoZW4gd2UgZGV0ZWN0IHRoZSByaWdodCBtb3VzZSBidXR0b24gaXMgcHJlc3NlZCBkb3duLCBidXQgbm90IHlldCBjbGlja2VkLCB3ZVxuICAgICAgc2V0IHBvaW50ZXItZXZlbnRzIHRvIG5vbmUgb24gdGhlIG5hdiBkaXYuIFRoaXMgaXMgc28gdGhhdCB0aGUgdXBjb21pbmcgcmlnaHQtY2xpY2sgZXZlbnQgb25cbiAgICAgIHRoZSBuZXh0IG1vdXNldXAgd2lsbCBidWJibGUgZG93biB0byB0aGUgaW1hZ2UuIE9uY2UgdGhlIHJpZ2h0LWNsaWNrL2NvbnRleHRtZW51IGV2ZW50IG9jY3Vyc1xuICAgICAgd2Ugc2V0IHRoZSBwb2ludGVyIGV2ZW50cyBiYWNrIHRvIGF1dG8gZm9yIHRoZSBuYXYgZGl2IHNvIGl0IGNhbiBjYXB0dXJlIGhvdmVyIGFuZCBsZWZ0LWNsaWNrXG4gICAgICBldmVudHMgYXMgdXN1YWwuXG4gICAgICovXG4gICAgdGhpcy4kbmF2Lm9uKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC53aGljaCA9PT0gMykge1xuICAgICAgICBzZWxmLiRuYXYuY3NzKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG5cbiAgICAgICAgc2VsZi4kbGlnaHRib3gub25lKCdjb250ZXh0bWVudScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuJG5hdi5jc3MoJ3BvaW50ZXItZXZlbnRzJywgJ2F1dG8nKTtcbiAgICAgICAgICB9LmJpbmQoc2VsZiksIDApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1sb2FkZXIsIC5sYi1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGYuZW5kKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gU2hvdyBvdmVybGF5IGFuZCBsaWdodGJveC4gSWYgdGhlIGltYWdlIGlzIHBhcnQgb2YgYSBzZXQsIGFkZCBzaWJsaW5ncyB0byBhbGJ1bSBhcnJheS5cbiAgTGlnaHRib3gucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gKCRsaW5rKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xuXG4gICAgJHdpbmRvdy5vbigncmVzaXplJywgJC5wcm94eSh0aGlzLnNpemVPdmVybGF5LCB0aGlzKSk7XG5cbiAgICAkKCdzZWxlY3QsIG9iamVjdCwgZW1iZWQnKS5jc3Moe1xuICAgICAgdmlzaWJpbGl0eTogJ2hpZGRlbidcbiAgICB9KTtcblxuICAgIHRoaXMuc2l6ZU92ZXJsYXkoKTtcblxuICAgIHRoaXMuYWxidW0gPSBbXTtcbiAgICB2YXIgaW1hZ2VOdW1iZXIgPSAwO1xuXG4gICAgZnVuY3Rpb24gYWRkVG9BbGJ1bSgkbGluaykge1xuICAgICAgc2VsZi5hbGJ1bS5wdXNoKHtcbiAgICAgICAgYWx0OiAkbGluay5hdHRyKCdkYXRhLWFsdCcpLFxuICAgICAgICBsaW5rOiAkbGluay5hdHRyKCdocmVmJyksXG4gICAgICAgIHRpdGxlOiAkbGluay5hdHRyKCdkYXRhLXRpdGxlJykgfHwgJGxpbmsuYXR0cigndGl0bGUnKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU3VwcG9ydCBib3RoIGRhdGEtbGlnaHRib3ggYXR0cmlidXRlIGFuZCByZWwgYXR0cmlidXRlIGltcGxlbWVudGF0aW9uc1xuICAgIHZhciBkYXRhTGlnaHRib3hWYWx1ZSA9ICRsaW5rLmF0dHIoJ2RhdGEtbGlnaHRib3gnKTtcbiAgICB2YXIgJGxpbmtzO1xuXG4gICAgaWYgKGRhdGFMaWdodGJveFZhbHVlKSB7XG4gICAgICAkbGlua3MgPSAkKCRsaW5rLnByb3AoJ3RhZ05hbWUnKSArICdbZGF0YS1saWdodGJveD1cIicgKyBkYXRhTGlnaHRib3hWYWx1ZSArICdcIl0nKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJGxpbmtzLmxlbmd0aDsgaSA9ICsraSkge1xuICAgICAgICBhZGRUb0FsYnVtKCQoJGxpbmtzW2ldKSk7XG4gICAgICAgIGlmICgkbGlua3NbaV0gPT09ICRsaW5rWzBdKSB7XG4gICAgICAgICAgaW1hZ2VOdW1iZXIgPSBpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICgkbGluay5hdHRyKCdyZWwnKSA9PT0gJ2xpZ2h0Ym94Jykge1xuICAgICAgICAvLyBJZiBpbWFnZSBpcyBub3QgcGFydCBvZiBhIHNldFxuICAgICAgICBhZGRUb0FsYnVtKCRsaW5rKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIGltYWdlIGlzIHBhcnQgb2YgYSBzZXRcbiAgICAgICAgJGxpbmtzID0gJCgkbGluay5wcm9wKCd0YWdOYW1lJykgKyAnW3JlbD1cIicgKyAkbGluay5hdHRyKCdyZWwnKSArICdcIl0nKTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAkbGlua3MubGVuZ3RoOyBqID0gKytqKSB7XG4gICAgICAgICAgYWRkVG9BbGJ1bSgkKCRsaW5rc1tqXSkpO1xuICAgICAgICAgIGlmICgkbGlua3Nbal0gPT09ICRsaW5rWzBdKSB7XG4gICAgICAgICAgICBpbWFnZU51bWJlciA9IGo7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUG9zaXRpb24gTGlnaHRib3hcbiAgICB2YXIgdG9wID0gJHdpbmRvdy5zY3JvbGxUb3AoKSArIHRoaXMub3B0aW9ucy5wb3NpdGlvbkZyb21Ub3A7XG4gICAgdmFyIGxlZnQgPSAkd2luZG93LnNjcm9sbExlZnQoKTtcbiAgICB0aGlzLiRsaWdodGJveC5jc3Moe1xuICAgICAgdG9wOiB0b3AgKyAncHgnLFxuICAgICAgbGVmdDogbGVmdCArICdweCdcbiAgICB9KS5mYWRlSW4odGhpcy5vcHRpb25zLmZhZGVEdXJhdGlvbik7XG5cbiAgICAvLyBEaXNhYmxlIHNjcm9sbGluZyBvZiB0aGUgcGFnZSB3aGlsZSBvcGVuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5kaXNhYmxlU2Nyb2xsaW5nKSB7XG4gICAgICAkKCdodG1sJykuYWRkQ2xhc3MoJ2xiLWRpc2FibGUtc2Nyb2xsaW5nJyk7XG4gICAgfVxuXG4gICAgdGhpcy5jaGFuZ2VJbWFnZShpbWFnZU51bWJlcik7XG4gIH07XG5cbiAgLy8gSGlkZSBtb3N0IFVJIGVsZW1lbnRzIGluIHByZXBhcmF0aW9uIGZvciB0aGUgYW5pbWF0ZWQgcmVzaXppbmcgb2YgdGhlIGxpZ2h0Ym94LlxuICBMaWdodGJveC5wcm90b3R5cGUuY2hhbmdlSW1hZ2UgPSBmdW5jdGlvbiAoaW1hZ2VOdW1iZXIpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB0aGlzLmRpc2FibGVLZXlib2FyZE5hdigpO1xuICAgIHZhciAkaW1hZ2UgPSB0aGlzLiRsaWdodGJveC5maW5kKCcubGItaW1hZ2UnKTtcblxuICAgIHRoaXMuJG92ZXJsYXkuZmFkZUluKHRoaXMub3B0aW9ucy5mYWRlRHVyYXRpb24pO1xuXG4gICAgJCgnLmxiLWxvYWRlcicpLmZhZGVJbignc2xvdycpO1xuICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1pbWFnZSwgLmxiLW5hdiwgLmxiLXByZXYsIC5sYi1uZXh0LCAubGItZGF0YUNvbnRhaW5lciwgLmxiLW51bWJlcnMsIC5sYi1jYXB0aW9uJykuaGlkZSgpO1xuXG4gICAgdGhpcy4kb3V0ZXJDb250YWluZXIuYWRkQ2xhc3MoJ2FuaW1hdGluZycpO1xuXG4gICAgLy8gV2hlbiBpbWFnZSB0byBzaG93IGlzIHByZWxvYWRlZCwgd2Ugc2VuZCB0aGUgd2lkdGggYW5kIGhlaWdodCB0byBzaXplQ29udGFpbmVyKClcbiAgICB2YXIgcHJlbG9hZGVyID0gbmV3IEltYWdlKCk7XG4gICAgcHJlbG9hZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkcHJlbG9hZGVyO1xuICAgICAgdmFyIGltYWdlSGVpZ2h0O1xuICAgICAgdmFyIGltYWdlV2lkdGg7XG4gICAgICB2YXIgbWF4SW1hZ2VIZWlnaHQ7XG4gICAgICB2YXIgbWF4SW1hZ2VXaWR0aDtcbiAgICAgIHZhciB3aW5kb3dIZWlnaHQ7XG4gICAgICB2YXIgd2luZG93V2lkdGg7XG5cbiAgICAgICRpbWFnZS5hdHRyKHtcbiAgICAgICAgJ2FsdCc6IHNlbGYuYWxidW1baW1hZ2VOdW1iZXJdLmFsdCxcbiAgICAgICAgJ3NyYyc6IHNlbGYuYWxidW1baW1hZ2VOdW1iZXJdLmxpbmtcbiAgICAgIH0pO1xuXG4gICAgICAkcHJlbG9hZGVyID0gJChwcmVsb2FkZXIpO1xuXG4gICAgICAkaW1hZ2Uud2lkdGgocHJlbG9hZGVyLndpZHRoKTtcbiAgICAgICRpbWFnZS5oZWlnaHQocHJlbG9hZGVyLmhlaWdodCk7XG5cbiAgICAgIGlmIChzZWxmLm9wdGlvbnMuZml0SW1hZ2VzSW5WaWV3cG9ydCkge1xuICAgICAgICAvLyBGaXQgaW1hZ2UgaW5zaWRlIHRoZSB2aWV3cG9ydC5cbiAgICAgICAgLy8gVGFrZSBpbnRvIGFjY291bnQgdGhlIGJvcmRlciBhcm91bmQgdGhlIGltYWdlIGFuZCBhbiBhZGRpdGlvbmFsIDEwcHggZ3V0dGVyIG9uIGVhY2ggc2lkZS5cblxuICAgICAgICB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuICAgICAgICB3aW5kb3dIZWlnaHQgPSAkKHdpbmRvdykuaGVpZ2h0KCk7XG4gICAgICAgIG1heEltYWdlV2lkdGggPSB3aW5kb3dXaWR0aCAtIHNlbGYuY29udGFpbmVyUGFkZGluZy5sZWZ0IC0gc2VsZi5jb250YWluZXJQYWRkaW5nLnJpZ2h0IC0gc2VsZi5pbWFnZUJvcmRlcldpZHRoLmxlZnQgLSBzZWxmLmltYWdlQm9yZGVyV2lkdGgucmlnaHQgLSAyMDtcbiAgICAgICAgbWF4SW1hZ2VIZWlnaHQgPSB3aW5kb3dIZWlnaHQgLSBzZWxmLmNvbnRhaW5lclBhZGRpbmcudG9wIC0gc2VsZi5jb250YWluZXJQYWRkaW5nLmJvdHRvbSAtIHNlbGYuaW1hZ2VCb3JkZXJXaWR0aC50b3AgLSBzZWxmLmltYWdlQm9yZGVyV2lkdGguYm90dG9tIC0gMTIwO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIGltYWdlIHNpemUgaXMgbGFyZ2VyIHRoZW4gbWF4V2lkdGh8bWF4SGVpZ2h0IGluIHNldHRpbmdzXG4gICAgICAgIGlmIChzZWxmLm9wdGlvbnMubWF4V2lkdGggJiYgc2VsZi5vcHRpb25zLm1heFdpZHRoIDwgbWF4SW1hZ2VXaWR0aCkge1xuICAgICAgICAgIG1heEltYWdlV2lkdGggPSBzZWxmLm9wdGlvbnMubWF4V2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5tYXhIZWlnaHQgJiYgc2VsZi5vcHRpb25zLm1heEhlaWdodCA8IG1heEltYWdlV2lkdGgpIHtcbiAgICAgICAgICBtYXhJbWFnZUhlaWdodCA9IHNlbGYub3B0aW9ucy5tYXhIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJcyB0aGUgY3VycmVudCBpbWFnZSdzIHdpZHRoIG9yIGhlaWdodCBpcyBncmVhdGVyIHRoYW4gdGhlIG1heEltYWdlV2lkdGggb3IgbWF4SW1hZ2VIZWlnaHRcbiAgICAgICAgLy8gb3B0aW9uIHRoYW4gd2UgbmVlZCB0byBzaXplIGRvd24gd2hpbGUgbWFpbnRhaW5pbmcgdGhlIGFzcGVjdCByYXRpby5cbiAgICAgICAgaWYgKHByZWxvYWRlci53aWR0aCA+IG1heEltYWdlV2lkdGggfHwgcHJlbG9hZGVyLmhlaWdodCA+IG1heEltYWdlSGVpZ2h0KSB7XG4gICAgICAgICAgaWYgKHByZWxvYWRlci53aWR0aCAvIG1heEltYWdlV2lkdGggPiBwcmVsb2FkZXIuaGVpZ2h0IC8gbWF4SW1hZ2VIZWlnaHQpIHtcbiAgICAgICAgICAgIGltYWdlV2lkdGggPSBtYXhJbWFnZVdpZHRoO1xuICAgICAgICAgICAgaW1hZ2VIZWlnaHQgPSBwYXJzZUludChwcmVsb2FkZXIuaGVpZ2h0IC8gKHByZWxvYWRlci53aWR0aCAvIGltYWdlV2lkdGgpLCAxMCk7XG4gICAgICAgICAgICAkaW1hZ2Uud2lkdGgoaW1hZ2VXaWR0aCk7XG4gICAgICAgICAgICAkaW1hZ2UuaGVpZ2h0KGltYWdlSGVpZ2h0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW1hZ2VIZWlnaHQgPSBtYXhJbWFnZUhlaWdodDtcbiAgICAgICAgICAgIGltYWdlV2lkdGggPSBwYXJzZUludChwcmVsb2FkZXIud2lkdGggLyAocHJlbG9hZGVyLmhlaWdodCAvIGltYWdlSGVpZ2h0KSwgMTApO1xuICAgICAgICAgICAgJGltYWdlLndpZHRoKGltYWdlV2lkdGgpO1xuICAgICAgICAgICAgJGltYWdlLmhlaWdodChpbWFnZUhlaWdodCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzZWxmLnNpemVDb250YWluZXIoJGltYWdlLndpZHRoKCksICRpbWFnZS5oZWlnaHQoKSk7XG4gICAgfTtcblxuICAgIHByZWxvYWRlci5zcmMgPSB0aGlzLmFsYnVtW2ltYWdlTnVtYmVyXS5saW5rO1xuICAgIHRoaXMuY3VycmVudEltYWdlSW5kZXggPSBpbWFnZU51bWJlcjtcbiAgfTtcblxuICAvLyBTdHJldGNoIG92ZXJsYXkgdG8gZml0IHRoZSB2aWV3cG9ydFxuICBMaWdodGJveC5wcm90b3R5cGUuc2l6ZU92ZXJsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy4kb3ZlcmxheS53aWR0aCgkKGRvY3VtZW50KS53aWR0aCgpKS5oZWlnaHQoJChkb2N1bWVudCkuaGVpZ2h0KCkpO1xuICB9O1xuXG4gIC8vIEFuaW1hdGUgdGhlIHNpemUgb2YgdGhlIGxpZ2h0Ym94IHRvIGZpdCB0aGUgaW1hZ2Ugd2UgYXJlIHNob3dpbmdcbiAgTGlnaHRib3gucHJvdG90eXBlLnNpemVDb250YWluZXIgPSBmdW5jdGlvbiAoaW1hZ2VXaWR0aCwgaW1hZ2VIZWlnaHQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgb2xkV2lkdGggPSB0aGlzLiRvdXRlckNvbnRhaW5lci5vdXRlcldpZHRoKCk7XG4gICAgdmFyIG9sZEhlaWdodCA9IHRoaXMuJG91dGVyQ29udGFpbmVyLm91dGVySGVpZ2h0KCk7XG4gICAgdmFyIG5ld1dpZHRoID0gaW1hZ2VXaWR0aCArIHRoaXMuY29udGFpbmVyUGFkZGluZy5sZWZ0ICsgdGhpcy5jb250YWluZXJQYWRkaW5nLnJpZ2h0ICsgdGhpcy5pbWFnZUJvcmRlcldpZHRoLmxlZnQgKyB0aGlzLmltYWdlQm9yZGVyV2lkdGgucmlnaHQ7XG4gICAgdmFyIG5ld0hlaWdodCA9IGltYWdlSGVpZ2h0ICsgdGhpcy5jb250YWluZXJQYWRkaW5nLnRvcCArIHRoaXMuY29udGFpbmVyUGFkZGluZy5ib3R0b20gKyB0aGlzLmltYWdlQm9yZGVyV2lkdGgudG9wICsgdGhpcy5pbWFnZUJvcmRlcldpZHRoLmJvdHRvbTtcblxuICAgIGZ1bmN0aW9uIHBvc3RSZXNpemUoKSB7XG4gICAgICBzZWxmLiRsaWdodGJveC5maW5kKCcubGItZGF0YUNvbnRhaW5lcicpLndpZHRoKG5ld1dpZHRoKTtcbiAgICAgIHNlbGYuJGxpZ2h0Ym94LmZpbmQoJy5sYi1wcmV2TGluaycpLmhlaWdodChuZXdIZWlnaHQpO1xuICAgICAgc2VsZi4kbGlnaHRib3guZmluZCgnLmxiLW5leHRMaW5rJykuaGVpZ2h0KG5ld0hlaWdodCk7XG4gICAgICBzZWxmLnNob3dJbWFnZSgpO1xuICAgIH1cblxuICAgIGlmIChvbGRXaWR0aCAhPT0gbmV3V2lkdGggfHwgb2xkSGVpZ2h0ICE9PSBuZXdIZWlnaHQpIHtcbiAgICAgIHRoaXMuJG91dGVyQ29udGFpbmVyLmFuaW1hdGUoe1xuICAgICAgICB3aWR0aDogbmV3V2lkdGgsXG4gICAgICAgIGhlaWdodDogbmV3SGVpZ2h0XG4gICAgICB9LCB0aGlzLm9wdGlvbnMucmVzaXplRHVyYXRpb24sICdzd2luZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcG9zdFJlc2l6ZSgpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBvc3RSZXNpemUoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gRGlzcGxheSB0aGUgaW1hZ2UgYW5kIGl0cyBkZXRhaWxzIGFuZCBiZWdpbiBwcmVsb2FkIG5laWdoYm9yaW5nIGltYWdlcy5cbiAgTGlnaHRib3gucHJvdG90eXBlLnNob3dJbWFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLiRsaWdodGJveC5maW5kKCcubGItbG9hZGVyJykuc3RvcCh0cnVlKS5oaWRlKCk7XG4gICAgdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLWltYWdlJykuZmFkZUluKHRoaXMub3B0aW9ucy5pbWFnZUZhZGVEdXJhdGlvbik7XG5cbiAgICB0aGlzLnVwZGF0ZU5hdigpO1xuICAgIHRoaXMudXBkYXRlRGV0YWlscygpO1xuICAgIHRoaXMucHJlbG9hZE5laWdoYm9yaW5nSW1hZ2VzKCk7XG4gICAgdGhpcy5lbmFibGVLZXlib2FyZE5hdigpO1xuICB9O1xuXG4gIC8vIERpc3BsYXkgcHJldmlvdXMgYW5kIG5leHQgbmF2aWdhdGlvbiBpZiBhcHByb3ByaWF0ZS5cbiAgTGlnaHRib3gucHJvdG90eXBlLnVwZGF0ZU5hdiA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdG91Y2ggZXZlbnRzLiBJZiBzbywgd2UgdGFrZSB0aGUgY29uc2VydmF0aXZlIGFwcHJvYWNoXG4gICAgLy8gYW5kIGFzc3VtZSB0aGF0IG1vdXNlIGhvdmVyIGV2ZW50cyBhcmUgbm90IHN1cHBvcnRlZCBhbmQgYWx3YXlzIHNob3cgcHJldi9uZXh0IG5hdmlnYXRpb25cbiAgICAvLyBhcnJvd3MgaW4gaW1hZ2Ugc2V0cy5cbiAgICB2YXIgYWx3YXlzU2hvd05hdiA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBkb2N1bWVudC5jcmVhdGVFdmVudCgnVG91Y2hFdmVudCcpO1xuICAgICAgYWx3YXlzU2hvd05hdiA9IHRoaXMub3B0aW9ucy5hbHdheXNTaG93TmF2T25Ub3VjaERldmljZXMgPyB0cnVlIDogZmFsc2U7XG4gICAgfSBjYXRjaCAoZSkge31cblxuICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1uYXYnKS5zaG93KCk7XG5cbiAgICBpZiAodGhpcy5hbGJ1bS5sZW5ndGggPiAxKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLndyYXBBcm91bmQpIHtcbiAgICAgICAgaWYgKGFsd2F5c1Nob3dOYXYpIHtcbiAgICAgICAgICB0aGlzLiRsaWdodGJveC5maW5kKCcubGItcHJldiwgLmxiLW5leHQnKS5jc3MoJ29wYWNpdHknLCAnMScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1wcmV2LCAubGItbmV4dCcpLnNob3coKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbWFnZUluZGV4ID4gMCkge1xuICAgICAgICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1wcmV2Jykuc2hvdygpO1xuICAgICAgICAgIGlmIChhbHdheXNTaG93TmF2KSB7XG4gICAgICAgICAgICB0aGlzLiRsaWdodGJveC5maW5kKCcubGItcHJldicpLmNzcygnb3BhY2l0eScsICcxJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbWFnZUluZGV4IDwgdGhpcy5hbGJ1bS5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLW5leHQnKS5zaG93KCk7XG4gICAgICAgICAgaWYgKGFsd2F5c1Nob3dOYXYpIHtcbiAgICAgICAgICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1uZXh0JykuY3NzKCdvcGFjaXR5JywgJzEnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gRGlzcGxheSBjYXB0aW9uLCBpbWFnZSBudW1iZXIsIGFuZCBjbG9zaW5nIGJ1dHRvbi5cbiAgTGlnaHRib3gucHJvdG90eXBlLnVwZGF0ZURldGFpbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gRW5hYmxlIGFuY2hvciBjbGlja3MgaW4gdGhlIGluamVjdGVkIGNhcHRpb24gaHRtbC5cbiAgICAvLyBUaGFua3MgTmF0ZSBXcmlnaHQgZm9yIHRoZSBmaXguIEBodHRwczovL2dpdGh1Yi5jb20vTmF0ZVdyXG4gICAgaWYgKHR5cGVvZiB0aGlzLmFsYnVtW3RoaXMuY3VycmVudEltYWdlSW5kZXhdLnRpdGxlICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLmFsYnVtW3RoaXMuY3VycmVudEltYWdlSW5kZXhdLnRpdGxlICE9PSAnJykge1xuICAgICAgdmFyICRjYXB0aW9uID0gdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLWNhcHRpb24nKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2FuaXRpemVUaXRsZSkge1xuICAgICAgICAkY2FwdGlvbi50ZXh0KHRoaXMuYWxidW1bdGhpcy5jdXJyZW50SW1hZ2VJbmRleF0udGl0bGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGNhcHRpb24uaHRtbCh0aGlzLmFsYnVtW3RoaXMuY3VycmVudEltYWdlSW5kZXhdLnRpdGxlKTtcbiAgICAgIH1cbiAgICAgICRjYXB0aW9uLmZhZGVJbignZmFzdCcpLmZpbmQoJ2EnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKCQodGhpcykuYXR0cigndGFyZ2V0JykgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHdpbmRvdy5vcGVuKCQodGhpcykuYXR0cignaHJlZicpLCAkKHRoaXMpLmF0dHIoJ3RhcmdldCcpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsb2NhdGlvbi5ocmVmID0gJCh0aGlzKS5hdHRyKCdocmVmJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmFsYnVtLmxlbmd0aCA+IDEgJiYgdGhpcy5vcHRpb25zLnNob3dJbWFnZU51bWJlckxhYmVsKSB7XG4gICAgICB2YXIgbGFiZWxUZXh0ID0gdGhpcy5pbWFnZUNvdW50TGFiZWwodGhpcy5jdXJyZW50SW1hZ2VJbmRleCArIDEsIHRoaXMuYWxidW0ubGVuZ3RoKTtcbiAgICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1udW1iZXInKS50ZXh0KGxhYmVsVGV4dCkuZmFkZUluKCdmYXN0Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1udW1iZXInKS5oaWRlKCk7XG4gICAgfVxuXG4gICAgdGhpcy4kb3V0ZXJDb250YWluZXIucmVtb3ZlQ2xhc3MoJ2FuaW1hdGluZycpO1xuXG4gICAgdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLWRhdGFDb250YWluZXInKS5mYWRlSW4odGhpcy5vcHRpb25zLnJlc2l6ZUR1cmF0aW9uLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gc2VsZi5zaXplT3ZlcmxheSgpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFByZWxvYWQgcHJldmlvdXMgYW5kIG5leHQgaW1hZ2VzIGluIHNldC5cbiAgTGlnaHRib3gucHJvdG90eXBlLnByZWxvYWROZWlnaGJvcmluZ0ltYWdlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5hbGJ1bS5sZW5ndGggPiB0aGlzLmN1cnJlbnRJbWFnZUluZGV4ICsgMSkge1xuICAgICAgdmFyIHByZWxvYWROZXh0ID0gbmV3IEltYWdlKCk7XG4gICAgICBwcmVsb2FkTmV4dC5zcmMgPSB0aGlzLmFsYnVtW3RoaXMuY3VycmVudEltYWdlSW5kZXggKyAxXS5saW5rO1xuICAgIH1cbiAgICBpZiAodGhpcy5jdXJyZW50SW1hZ2VJbmRleCA+IDApIHtcbiAgICAgIHZhciBwcmVsb2FkUHJldiA9IG5ldyBJbWFnZSgpO1xuICAgICAgcHJlbG9hZFByZXYuc3JjID0gdGhpcy5hbGJ1bVt0aGlzLmN1cnJlbnRJbWFnZUluZGV4IC0gMV0ubGluaztcbiAgICB9XG4gIH07XG5cbiAgTGlnaHRib3gucHJvdG90eXBlLmVuYWJsZUtleWJvYXJkTmF2ID0gZnVuY3Rpb24gKCkge1xuICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cC5rZXlib2FyZCcsICQucHJveHkodGhpcy5rZXlib2FyZEFjdGlvbiwgdGhpcykpO1xuICB9O1xuXG4gIExpZ2h0Ym94LnByb3RvdHlwZS5kaXNhYmxlS2V5Ym9hcmROYXYgPSBmdW5jdGlvbiAoKSB7XG4gICAgJChkb2N1bWVudCkub2ZmKCcua2V5Ym9hcmQnKTtcbiAgfTtcblxuICBMaWdodGJveC5wcm90b3R5cGUua2V5Ym9hcmRBY3Rpb24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgS0VZQ09ERV9FU0MgPSAyNztcbiAgICB2YXIgS0VZQ09ERV9MRUZUQVJST1cgPSAzNztcbiAgICB2YXIgS0VZQ09ERV9SSUdIVEFSUk9XID0gMzk7XG5cbiAgICB2YXIga2V5Y29kZSA9IGV2ZW50LmtleUNvZGU7XG4gICAgdmFyIGtleSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoa2V5Y29kZSkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoa2V5Y29kZSA9PT0gS0VZQ09ERV9FU0MgfHwga2V5Lm1hdGNoKC94fG98Yy8pKSB7XG4gICAgICB0aGlzLmVuZCgpO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncCcgfHwga2V5Y29kZSA9PT0gS0VZQ09ERV9MRUZUQVJST1cpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRJbWFnZUluZGV4ICE9PSAwKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UodGhpcy5jdXJyZW50SW1hZ2VJbmRleCAtIDEpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMud3JhcEFyb3VuZCAmJiB0aGlzLmFsYnVtLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZSh0aGlzLmFsYnVtLmxlbmd0aCAtIDEpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnbicgfHwga2V5Y29kZSA9PT0gS0VZQ09ERV9SSUdIVEFSUk9XKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50SW1hZ2VJbmRleCAhPT0gdGhpcy5hbGJ1bS5sZW5ndGggLSAxKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UodGhpcy5jdXJyZW50SW1hZ2VJbmRleCArIDEpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMud3JhcEFyb3VuZCAmJiB0aGlzLmFsYnVtLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZSgwKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gQ2xvc2luZyB0aW1lLiA6LShcbiAgTGlnaHRib3gucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRpc2FibGVLZXlib2FyZE5hdigpO1xuICAgICQod2luZG93KS5vZmYoJ3Jlc2l6ZScsIHRoaXMuc2l6ZU92ZXJsYXkpO1xuICAgIHRoaXMuJGxpZ2h0Ym94LmZhZGVPdXQodGhpcy5vcHRpb25zLmZhZGVEdXJhdGlvbik7XG4gICAgdGhpcy4kb3ZlcmxheS5mYWRlT3V0KHRoaXMub3B0aW9ucy5mYWRlRHVyYXRpb24pO1xuICAgICQoJ3NlbGVjdCwgb2JqZWN0LCBlbWJlZCcpLmNzcyh7XG4gICAgICB2aXNpYmlsaXR5OiAndmlzaWJsZSdcbiAgICB9KTtcbiAgICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVTY3JvbGxpbmcpIHtcbiAgICAgICQoJ2h0bWwnKS5yZW1vdmVDbGFzcygnbGItZGlzYWJsZS1zY3JvbGxpbmcnKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIG5ldyBMaWdodGJveCgpO1xufSk7IiwiLyohXG4gKiBMaWdodGJveCB2Mi4xMC4wXG4gKiBieSBMb2tlc2ggRGhha2FyXG4gKlxuICogTW9yZSBpbmZvOlxuICogaHR0cDovL2xva2VzaGRoYWthci5jb20vcHJvamVjdHMvbGlnaHRib3gyL1xuICpcbiAqIENvcHlyaWdodCAyMDA3LCAyMDE4IExva2VzaCBEaGFrYXJcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9naXRodWIuY29tL2xva2VzaC9saWdodGJveDIvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICpcbiAqIEBwcmVzZXJ2ZVxuICovXG5cbi8vIFVzZXMgTm9kZSwgQU1EIG9yIGJyb3dzZXIgZ2xvYmFscyB0byBjcmVhdGUgYSBtb2R1bGUuXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cbiAgICAgICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIC8vIE5vZGUuIERvZXMgbm90IHdvcmsgd2l0aCBzdHJpY3QgQ29tbW9uSlMsIGJ1dFxuICAgICAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAgICAgLy8gbGlrZSBOb2RlLlxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZSgnanF1ZXJ5JykpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJyb3dzZXIgZ2xvYmFscyAocm9vdCBpcyB3aW5kb3cpXG4gICAgICAgIHJvb3QubGlnaHRib3ggPSBmYWN0b3J5KHJvb3QualF1ZXJ5KTtcbiAgICB9XG59KHRoaXMsIGZ1bmN0aW9uICgkKSB7XG5cbiAgZnVuY3Rpb24gTGlnaHRib3gob3B0aW9ucykge1xuICAgIHRoaXMuYWxidW0gPSBbXTtcbiAgICB0aGlzLmN1cnJlbnRJbWFnZUluZGV4ID0gdm9pZCAwO1xuICAgIHRoaXMuaW5pdCgpO1xuXG4gICAgLy8gb3B0aW9uc1xuICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRzKTtcbiAgICB0aGlzLm9wdGlvbihvcHRpb25zKTtcbiAgfVxuXG4gIC8vIERlc2NyaXB0aW9ucyBvZiBhbGwgb3B0aW9ucyBhdmFpbGFibGUgb24gdGhlIGRlbW8gc2l0ZTpcbiAgLy8gaHR0cDovL2xva2VzaGRoYWthci5jb20vcHJvamVjdHMvbGlnaHRib3gyL2luZGV4Lmh0bWwjb3B0aW9uc1xuICBMaWdodGJveC5kZWZhdWx0cyA9IHtcbiAgICBhbGJ1bUxhYmVsOiAnSW1hZ2UgJTEgb2YgJTInLFxuICAgIGFsd2F5c1Nob3dOYXZPblRvdWNoRGV2aWNlczogZmFsc2UsXG4gICAgZmFkZUR1cmF0aW9uOiA2MDAsXG4gICAgZml0SW1hZ2VzSW5WaWV3cG9ydDogdHJ1ZSxcbiAgICBpbWFnZUZhZGVEdXJhdGlvbjogNjAwLFxuICAgIC8vIG1heFdpZHRoOiA4MDAsXG4gICAgLy8gbWF4SGVpZ2h0OiA2MDAsXG4gICAgcG9zaXRpb25Gcm9tVG9wOiA1MCxcbiAgICByZXNpemVEdXJhdGlvbjogNzAwLFxuICAgIHNob3dJbWFnZU51bWJlckxhYmVsOiB0cnVlLFxuICAgIHdyYXBBcm91bmQ6IGZhbHNlLFxuICAgIGRpc2FibGVTY3JvbGxpbmc6IGZhbHNlLFxuICAgIC8qXG4gICAgU2FuaXRpemUgVGl0bGVcbiAgICBJZiB0aGUgY2FwdGlvbiBkYXRhIGlzIHRydXN0ZWQsIGZvciBleGFtcGxlIHlvdSBhcmUgaGFyZGNvZGluZyBpdCBpbiwgdGhlbiBsZWF2ZSB0aGlzIHRvIGZhbHNlLlxuICAgIFRoaXMgd2lsbCBmcmVlIHlvdSB0byBhZGQgaHRtbCB0YWdzLCBzdWNoIGFzIGxpbmtzLCBpbiB0aGUgY2FwdGlvbi5cblxuICAgIElmIHRoZSBjYXB0aW9uIGRhdGEgaXMgdXNlciBzdWJtaXR0ZWQgb3IgZnJvbSBzb21lIG90aGVyIHVudHJ1c3RlZCBzb3VyY2UsIHRoZW4gc2V0IHRoaXMgdG8gdHJ1ZVxuICAgIHRvIHByZXZlbnQgeHNzIGFuZCBvdGhlciBpbmplY3Rpb24gYXR0YWNrcy5cbiAgICAgKi9cbiAgICBzYW5pdGl6ZVRpdGxlOiBmYWxzZVxuICB9O1xuXG4gIExpZ2h0Ym94LnByb3RvdHlwZS5vcHRpb24gPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgJC5leHRlbmQodGhpcy5vcHRpb25zLCBvcHRpb25zKTtcbiAgfTtcblxuICBMaWdodGJveC5wcm90b3R5cGUuaW1hZ2VDb3VudExhYmVsID0gZnVuY3Rpb24oY3VycmVudEltYWdlTnVtLCB0b3RhbEltYWdlcykge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMuYWxidW1MYWJlbC5yZXBsYWNlKC8lMS9nLCBjdXJyZW50SW1hZ2VOdW0pLnJlcGxhY2UoLyUyL2csIHRvdGFsSW1hZ2VzKTtcbiAgfTtcblxuICBMaWdodGJveC5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvLyBCb3RoIGVuYWJsZSBhbmQgYnVpbGQgbWV0aG9kcyByZXF1aXJlIHRoZSBib2R5IHRhZyB0byBiZSBpbiB0aGUgRE9NLlxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgc2VsZi5lbmFibGUoKTtcbiAgICAgIHNlbGYuYnVpbGQoKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBMb29wIHRocm91Z2ggYW5jaG9ycyBhbmQgYXJlYW1hcHMgbG9va2luZyBmb3IgZWl0aGVyIGRhdGEtbGlnaHRib3ggYXR0cmlidXRlcyBvciByZWwgYXR0cmlidXRlc1xuICAvLyB0aGF0IGNvbnRhaW4gJ2xpZ2h0Ym94Jy4gV2hlbiB0aGVzZSBhcmUgY2xpY2tlZCwgc3RhcnQgbGlnaHRib3guXG4gIExpZ2h0Ym94LnByb3RvdHlwZS5lbmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgJCgnYm9keScpLm9uKCdjbGljaycsICdhW3JlbF49bGlnaHRib3hdLCBhcmVhW3JlbF49bGlnaHRib3hdLCBhW2RhdGEtbGlnaHRib3hdLCBhcmVhW2RhdGEtbGlnaHRib3hdJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIHNlbGYuc3RhcnQoJChldmVudC5jdXJyZW50VGFyZ2V0KSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gQnVpbGQgaHRtbCBmb3IgdGhlIGxpZ2h0Ym94IGFuZCB0aGUgb3ZlcmxheS5cbiAgLy8gQXR0YWNoIGV2ZW50IGhhbmRsZXJzIHRvIHRoZSBuZXcgRE9NIGVsZW1lbnRzLiBjbGljayBjbGljayBjbGlja1xuICBMaWdodGJveC5wcm90b3R5cGUuYnVpbGQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoJCgnI2xpZ2h0Ym94JykubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICQoJzxkaXYgaWQ9XCJsaWdodGJveE92ZXJsYXlcIiBjbGFzcz1cImxpZ2h0Ym94T3ZlcmxheVwiPjwvZGl2PjxkaXYgaWQ9XCJsaWdodGJveFwiIGNsYXNzPVwibGlnaHRib3hcIj48ZGl2IGNsYXNzPVwibGItb3V0ZXJDb250YWluZXJcIj48ZGl2IGNsYXNzPVwibGItY29udGFpbmVyXCI+PGltZyBjbGFzcz1cImxiLWltYWdlXCIgc3JjPVwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBUC8vL3dBQUFDSDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUNSQUVBT3c9PVwiIC8+PGRpdiBjbGFzcz1cImxiLW5hdlwiPjxhIGNsYXNzPVwibGItcHJldlwiIGhyZWY9XCJcIiA+PC9hPjxhIGNsYXNzPVwibGItbmV4dFwiIGhyZWY9XCJcIiA+PC9hPjwvZGl2PjxkaXYgY2xhc3M9XCJsYi1sb2FkZXJcIj48YSBjbGFzcz1cImxiLWNhbmNlbFwiPjwvYT48L2Rpdj48L2Rpdj48L2Rpdj48ZGl2IGNsYXNzPVwibGItZGF0YUNvbnRhaW5lclwiPjxkaXYgY2xhc3M9XCJsYi1kYXRhXCI+PGRpdiBjbGFzcz1cImxiLWRldGFpbHNcIj48c3BhbiBjbGFzcz1cImxiLWNhcHRpb25cIj48L3NwYW4+PHNwYW4gY2xhc3M9XCJsYi1udW1iZXJcIj48L3NwYW4+PC9kaXY+PGRpdiBjbGFzcz1cImxiLWNsb3NlQ29udGFpbmVyXCI+PGEgY2xhc3M9XCJsYi1jbG9zZVwiPjwvYT48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nKS5hcHBlbmRUbygkKCdib2R5JykpO1xuXG4gICAgLy8gQ2FjaGUgalF1ZXJ5IG9iamVjdHNcbiAgICB0aGlzLiRsaWdodGJveCAgICAgICA9ICQoJyNsaWdodGJveCcpO1xuICAgIHRoaXMuJG92ZXJsYXkgICAgICAgID0gJCgnI2xpZ2h0Ym94T3ZlcmxheScpO1xuICAgIHRoaXMuJG91dGVyQ29udGFpbmVyID0gdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLW91dGVyQ29udGFpbmVyJyk7XG4gICAgdGhpcy4kY29udGFpbmVyICAgICAgPSB0aGlzLiRsaWdodGJveC5maW5kKCcubGItY29udGFpbmVyJyk7XG4gICAgdGhpcy4kaW1hZ2UgICAgICAgICAgPSB0aGlzLiRsaWdodGJveC5maW5kKCcubGItaW1hZ2UnKTtcbiAgICB0aGlzLiRuYXYgICAgICAgICAgICA9IHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1uYXYnKTtcblxuICAgIC8vIFN0b3JlIGNzcyB2YWx1ZXMgZm9yIGZ1dHVyZSBsb29rdXBcbiAgICB0aGlzLmNvbnRhaW5lclBhZGRpbmcgPSB7XG4gICAgICB0b3A6IHBhcnNlSW50KHRoaXMuJGNvbnRhaW5lci5jc3MoJ3BhZGRpbmctdG9wJyksIDEwKSxcbiAgICAgIHJpZ2h0OiBwYXJzZUludCh0aGlzLiRjb250YWluZXIuY3NzKCdwYWRkaW5nLXJpZ2h0JyksIDEwKSxcbiAgICAgIGJvdHRvbTogcGFyc2VJbnQodGhpcy4kY29udGFpbmVyLmNzcygncGFkZGluZy1ib3R0b20nKSwgMTApLFxuICAgICAgbGVmdDogcGFyc2VJbnQodGhpcy4kY29udGFpbmVyLmNzcygncGFkZGluZy1sZWZ0JyksIDEwKVxuICAgIH07XG5cbiAgICB0aGlzLmltYWdlQm9yZGVyV2lkdGggPSB7XG4gICAgICB0b3A6IHBhcnNlSW50KHRoaXMuJGltYWdlLmNzcygnYm9yZGVyLXRvcC13aWR0aCcpLCAxMCksXG4gICAgICByaWdodDogcGFyc2VJbnQodGhpcy4kaW1hZ2UuY3NzKCdib3JkZXItcmlnaHQtd2lkdGgnKSwgMTApLFxuICAgICAgYm90dG9tOiBwYXJzZUludCh0aGlzLiRpbWFnZS5jc3MoJ2JvcmRlci1ib3R0b20td2lkdGgnKSwgMTApLFxuICAgICAgbGVmdDogcGFyc2VJbnQodGhpcy4kaW1hZ2UuY3NzKCdib3JkZXItbGVmdC13aWR0aCcpLCAxMClcbiAgICB9O1xuXG4gICAgLy8gQXR0YWNoIGV2ZW50IGhhbmRsZXJzIHRvIHRoZSBuZXdseSBtaW50ZWQgRE9NIGVsZW1lbnRzXG4gICAgdGhpcy4kb3ZlcmxheS5oaWRlKCkub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLmVuZCgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuXG4gICAgdGhpcy4kbGlnaHRib3guaGlkZSgpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAoJChldmVudC50YXJnZXQpLmF0dHIoJ2lkJykgPT09ICdsaWdodGJveCcpIHtcbiAgICAgICAgc2VsZi5lbmQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIHRoaXMuJG91dGVyQ29udGFpbmVyLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICBpZiAoJChldmVudC50YXJnZXQpLmF0dHIoJ2lkJykgPT09ICdsaWdodGJveCcpIHtcbiAgICAgICAgc2VsZi5lbmQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1wcmV2Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoc2VsZi5jdXJyZW50SW1hZ2VJbmRleCA9PT0gMCkge1xuICAgICAgICBzZWxmLmNoYW5nZUltYWdlKHNlbGYuYWxidW0ubGVuZ3RoIC0gMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLmNoYW5nZUltYWdlKHNlbGYuY3VycmVudEltYWdlSW5kZXggLSAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1uZXh0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoc2VsZi5jdXJyZW50SW1hZ2VJbmRleCA9PT0gc2VsZi5hbGJ1bS5sZW5ndGggLSAxKSB7XG4gICAgICAgIHNlbGYuY2hhbmdlSW1hZ2UoMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLmNoYW5nZUltYWdlKHNlbGYuY3VycmVudEltYWdlSW5kZXggKyAxKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIC8qXG4gICAgICBTaG93IGNvbnRleHQgbWVudSBmb3IgaW1hZ2Ugb24gcmlnaHQtY2xpY2tcblxuICAgICAgVGhlcmUgaXMgYSBkaXYgY29udGFpbmluZyB0aGUgbmF2aWdhdGlvbiB0aGF0IHNwYW5zIHRoZSBlbnRpcmUgaW1hZ2UgYW5kIGxpdmVzIGFib3ZlIG9mIGl0LiBJZlxuICAgICAgeW91IHJpZ2h0LWNsaWNrLCB5b3UgYXJlIHJpZ2h0IGNsaWNraW5nIHRoaXMgZGl2IGFuZCBub3QgdGhlIGltYWdlLiBUaGlzIHByZXZlbnRzIHVzZXJzIGZyb21cbiAgICAgIHNhdmluZyB0aGUgaW1hZ2Ugb3IgdXNpbmcgb3RoZXIgY29udGV4dCBtZW51IGFjdGlvbnMgd2l0aCB0aGUgaW1hZ2UuXG5cbiAgICAgIFRvIGZpeCB0aGlzLCB3aGVuIHdlIGRldGVjdCB0aGUgcmlnaHQgbW91c2UgYnV0dG9uIGlzIHByZXNzZWQgZG93biwgYnV0IG5vdCB5ZXQgY2xpY2tlZCwgd2VcbiAgICAgIHNldCBwb2ludGVyLWV2ZW50cyB0byBub25lIG9uIHRoZSBuYXYgZGl2LiBUaGlzIGlzIHNvIHRoYXQgdGhlIHVwY29taW5nIHJpZ2h0LWNsaWNrIGV2ZW50IG9uXG4gICAgICB0aGUgbmV4dCBtb3VzZXVwIHdpbGwgYnViYmxlIGRvd24gdG8gdGhlIGltYWdlLiBPbmNlIHRoZSByaWdodC1jbGljay9jb250ZXh0bWVudSBldmVudCBvY2N1cnNcbiAgICAgIHdlIHNldCB0aGUgcG9pbnRlciBldmVudHMgYmFjayB0byBhdXRvIGZvciB0aGUgbmF2IGRpdiBzbyBpdCBjYW4gY2FwdHVyZSBob3ZlciBhbmQgbGVmdC1jbGlja1xuICAgICAgZXZlbnRzIGFzIHVzdWFsLlxuICAgICAqL1xuICAgIHRoaXMuJG5hdi5vbignbW91c2Vkb3duJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgIGlmIChldmVudC53aGljaCA9PT0gMykge1xuICAgICAgICBzZWxmLiRuYXYuY3NzKCdwb2ludGVyLWV2ZW50cycsICdub25lJyk7XG5cbiAgICAgICAgc2VsZi4kbGlnaHRib3gub25lKCdjb250ZXh0bWVudScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHRoaXMuJG5hdi5jc3MoJ3BvaW50ZXItZXZlbnRzJywgJ2F1dG8nKTtcbiAgICAgICAgICB9LmJpbmQoc2VsZiksIDApO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLWxvYWRlciwgLmxiLWNsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLmVuZCgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFNob3cgb3ZlcmxheSBhbmQgbGlnaHRib3guIElmIHRoZSBpbWFnZSBpcyBwYXJ0IG9mIGEgc2V0LCBhZGQgc2libGluZ3MgdG8gYWxidW0gYXJyYXkuXG4gIExpZ2h0Ym94LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKCRsaW5rKSB7XG4gICAgdmFyIHNlbGYgICAgPSB0aGlzO1xuICAgIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xuXG4gICAgJHdpbmRvdy5vbigncmVzaXplJywgJC5wcm94eSh0aGlzLnNpemVPdmVybGF5LCB0aGlzKSk7XG5cbiAgICAkKCdzZWxlY3QsIG9iamVjdCwgZW1iZWQnKS5jc3Moe1xuICAgICAgdmlzaWJpbGl0eTogJ2hpZGRlbidcbiAgICB9KTtcblxuICAgIHRoaXMuc2l6ZU92ZXJsYXkoKTtcblxuICAgIHRoaXMuYWxidW0gPSBbXTtcbiAgICB2YXIgaW1hZ2VOdW1iZXIgPSAwO1xuXG4gICAgZnVuY3Rpb24gYWRkVG9BbGJ1bSgkbGluaykge1xuICAgICAgc2VsZi5hbGJ1bS5wdXNoKHtcbiAgICAgICAgYWx0OiAkbGluay5hdHRyKCdkYXRhLWFsdCcpLFxuICAgICAgICBsaW5rOiAkbGluay5hdHRyKCdocmVmJyksXG4gICAgICAgIHRpdGxlOiAkbGluay5hdHRyKCdkYXRhLXRpdGxlJykgfHwgJGxpbmsuYXR0cigndGl0bGUnKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gU3VwcG9ydCBib3RoIGRhdGEtbGlnaHRib3ggYXR0cmlidXRlIGFuZCByZWwgYXR0cmlidXRlIGltcGxlbWVudGF0aW9uc1xuICAgIHZhciBkYXRhTGlnaHRib3hWYWx1ZSA9ICRsaW5rLmF0dHIoJ2RhdGEtbGlnaHRib3gnKTtcbiAgICB2YXIgJGxpbmtzO1xuXG4gICAgaWYgKGRhdGFMaWdodGJveFZhbHVlKSB7XG4gICAgICAkbGlua3MgPSAkKCRsaW5rLnByb3AoJ3RhZ05hbWUnKSArICdbZGF0YS1saWdodGJveD1cIicgKyBkYXRhTGlnaHRib3hWYWx1ZSArICdcIl0nKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJGxpbmtzLmxlbmd0aDsgaSA9ICsraSkge1xuICAgICAgICBhZGRUb0FsYnVtKCQoJGxpbmtzW2ldKSk7XG4gICAgICAgIGlmICgkbGlua3NbaV0gPT09ICRsaW5rWzBdKSB7XG4gICAgICAgICAgaW1hZ2VOdW1iZXIgPSBpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICgkbGluay5hdHRyKCdyZWwnKSA9PT0gJ2xpZ2h0Ym94Jykge1xuICAgICAgICAvLyBJZiBpbWFnZSBpcyBub3QgcGFydCBvZiBhIHNldFxuICAgICAgICBhZGRUb0FsYnVtKCRsaW5rKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIElmIGltYWdlIGlzIHBhcnQgb2YgYSBzZXRcbiAgICAgICAgJGxpbmtzID0gJCgkbGluay5wcm9wKCd0YWdOYW1lJykgKyAnW3JlbD1cIicgKyAkbGluay5hdHRyKCdyZWwnKSArICdcIl0nKTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAkbGlua3MubGVuZ3RoOyBqID0gKytqKSB7XG4gICAgICAgICAgYWRkVG9BbGJ1bSgkKCRsaW5rc1tqXSkpO1xuICAgICAgICAgIGlmICgkbGlua3Nbal0gPT09ICRsaW5rWzBdKSB7XG4gICAgICAgICAgICBpbWFnZU51bWJlciA9IGo7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUG9zaXRpb24gTGlnaHRib3hcbiAgICB2YXIgdG9wICA9ICR3aW5kb3cuc2Nyb2xsVG9wKCkgKyB0aGlzLm9wdGlvbnMucG9zaXRpb25Gcm9tVG9wO1xuICAgIHZhciBsZWZ0ID0gJHdpbmRvdy5zY3JvbGxMZWZ0KCk7XG4gICAgdGhpcy4kbGlnaHRib3guY3NzKHtcbiAgICAgIHRvcDogdG9wICsgJ3B4JyxcbiAgICAgIGxlZnQ6IGxlZnQgKyAncHgnXG4gICAgfSkuZmFkZUluKHRoaXMub3B0aW9ucy5mYWRlRHVyYXRpb24pO1xuXG4gICAgLy8gRGlzYWJsZSBzY3JvbGxpbmcgb2YgdGhlIHBhZ2Ugd2hpbGUgb3BlblxuICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZVNjcm9sbGluZykge1xuICAgICAgJCgnaHRtbCcpLmFkZENsYXNzKCdsYi1kaXNhYmxlLXNjcm9sbGluZycpO1xuICAgIH1cblxuICAgIHRoaXMuY2hhbmdlSW1hZ2UoaW1hZ2VOdW1iZXIpO1xuICB9O1xuXG4gIC8vIEhpZGUgbW9zdCBVSSBlbGVtZW50cyBpbiBwcmVwYXJhdGlvbiBmb3IgdGhlIGFuaW1hdGVkIHJlc2l6aW5nIG9mIHRoZSBsaWdodGJveC5cbiAgTGlnaHRib3gucHJvdG90eXBlLmNoYW5nZUltYWdlID0gZnVuY3Rpb24oaW1hZ2VOdW1iZXIpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB0aGlzLmRpc2FibGVLZXlib2FyZE5hdigpO1xuICAgIHZhciAkaW1hZ2UgPSB0aGlzLiRsaWdodGJveC5maW5kKCcubGItaW1hZ2UnKTtcblxuICAgIHRoaXMuJG92ZXJsYXkuZmFkZUluKHRoaXMub3B0aW9ucy5mYWRlRHVyYXRpb24pO1xuXG4gICAgJCgnLmxiLWxvYWRlcicpLmZhZGVJbignc2xvdycpO1xuICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1pbWFnZSwgLmxiLW5hdiwgLmxiLXByZXYsIC5sYi1uZXh0LCAubGItZGF0YUNvbnRhaW5lciwgLmxiLW51bWJlcnMsIC5sYi1jYXB0aW9uJykuaGlkZSgpO1xuXG4gICAgdGhpcy4kb3V0ZXJDb250YWluZXIuYWRkQ2xhc3MoJ2FuaW1hdGluZycpO1xuXG4gICAgLy8gV2hlbiBpbWFnZSB0byBzaG93IGlzIHByZWxvYWRlZCwgd2Ugc2VuZCB0aGUgd2lkdGggYW5kIGhlaWdodCB0byBzaXplQ29udGFpbmVyKClcbiAgICB2YXIgcHJlbG9hZGVyID0gbmV3IEltYWdlKCk7XG4gICAgcHJlbG9hZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyICRwcmVsb2FkZXI7XG4gICAgICB2YXIgaW1hZ2VIZWlnaHQ7XG4gICAgICB2YXIgaW1hZ2VXaWR0aDtcbiAgICAgIHZhciBtYXhJbWFnZUhlaWdodDtcbiAgICAgIHZhciBtYXhJbWFnZVdpZHRoO1xuICAgICAgdmFyIHdpbmRvd0hlaWdodDtcbiAgICAgIHZhciB3aW5kb3dXaWR0aDtcblxuICAgICAgJGltYWdlLmF0dHIoe1xuICAgICAgICAnYWx0Jzogc2VsZi5hbGJ1bVtpbWFnZU51bWJlcl0uYWx0LFxuICAgICAgICAnc3JjJzogc2VsZi5hbGJ1bVtpbWFnZU51bWJlcl0ubGlua1xuICAgICAgfSk7XG5cbiAgICAgICRwcmVsb2FkZXIgPSAkKHByZWxvYWRlcik7XG5cbiAgICAgICRpbWFnZS53aWR0aChwcmVsb2FkZXIud2lkdGgpO1xuICAgICAgJGltYWdlLmhlaWdodChwcmVsb2FkZXIuaGVpZ2h0KTtcblxuICAgICAgaWYgKHNlbGYub3B0aW9ucy5maXRJbWFnZXNJblZpZXdwb3J0KSB7XG4gICAgICAgIC8vIEZpdCBpbWFnZSBpbnNpZGUgdGhlIHZpZXdwb3J0LlxuICAgICAgICAvLyBUYWtlIGludG8gYWNjb3VudCB0aGUgYm9yZGVyIGFyb3VuZCB0aGUgaW1hZ2UgYW5kIGFuIGFkZGl0aW9uYWwgMTBweCBndXR0ZXIgb24gZWFjaCBzaWRlLlxuXG4gICAgICAgIHdpbmRvd1dpZHRoICAgID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgICAgIHdpbmRvd0hlaWdodCAgID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuICAgICAgICBtYXhJbWFnZVdpZHRoICA9IHdpbmRvd1dpZHRoIC0gc2VsZi5jb250YWluZXJQYWRkaW5nLmxlZnQgLSBzZWxmLmNvbnRhaW5lclBhZGRpbmcucmlnaHQgLSBzZWxmLmltYWdlQm9yZGVyV2lkdGgubGVmdCAtIHNlbGYuaW1hZ2VCb3JkZXJXaWR0aC5yaWdodCAtIDIwO1xuICAgICAgICBtYXhJbWFnZUhlaWdodCA9IHdpbmRvd0hlaWdodCAtIHNlbGYuY29udGFpbmVyUGFkZGluZy50b3AgLSBzZWxmLmNvbnRhaW5lclBhZGRpbmcuYm90dG9tIC0gc2VsZi5pbWFnZUJvcmRlcldpZHRoLnRvcCAtIHNlbGYuaW1hZ2VCb3JkZXJXaWR0aC5ib3R0b20gLSAxMjA7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgaW1hZ2Ugc2l6ZSBpcyBsYXJnZXIgdGhlbiBtYXhXaWR0aHxtYXhIZWlnaHQgaW4gc2V0dGluZ3NcbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5tYXhXaWR0aCAmJiBzZWxmLm9wdGlvbnMubWF4V2lkdGggPCBtYXhJbWFnZVdpZHRoKSB7XG4gICAgICAgICAgbWF4SW1hZ2VXaWR0aCA9IHNlbGYub3B0aW9ucy5tYXhXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZi5vcHRpb25zLm1heEhlaWdodCAmJiBzZWxmLm9wdGlvbnMubWF4SGVpZ2h0IDwgbWF4SW1hZ2VXaWR0aCkge1xuICAgICAgICAgIG1heEltYWdlSGVpZ2h0ID0gc2VsZi5vcHRpb25zLm1heEhlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElzIHRoZSBjdXJyZW50IGltYWdlJ3Mgd2lkdGggb3IgaGVpZ2h0IGlzIGdyZWF0ZXIgdGhhbiB0aGUgbWF4SW1hZ2VXaWR0aCBvciBtYXhJbWFnZUhlaWdodFxuICAgICAgICAvLyBvcHRpb24gdGhhbiB3ZSBuZWVkIHRvIHNpemUgZG93biB3aGlsZSBtYWludGFpbmluZyB0aGUgYXNwZWN0IHJhdGlvLlxuICAgICAgICBpZiAoKHByZWxvYWRlci53aWR0aCA+IG1heEltYWdlV2lkdGgpIHx8IChwcmVsb2FkZXIuaGVpZ2h0ID4gbWF4SW1hZ2VIZWlnaHQpKSB7XG4gICAgICAgICAgaWYgKChwcmVsb2FkZXIud2lkdGggLyBtYXhJbWFnZVdpZHRoKSA+IChwcmVsb2FkZXIuaGVpZ2h0IC8gbWF4SW1hZ2VIZWlnaHQpKSB7XG4gICAgICAgICAgICBpbWFnZVdpZHRoICA9IG1heEltYWdlV2lkdGg7XG4gICAgICAgICAgICBpbWFnZUhlaWdodCA9IHBhcnNlSW50KHByZWxvYWRlci5oZWlnaHQgLyAocHJlbG9hZGVyLndpZHRoIC8gaW1hZ2VXaWR0aCksIDEwKTtcbiAgICAgICAgICAgICRpbWFnZS53aWR0aChpbWFnZVdpZHRoKTtcbiAgICAgICAgICAgICRpbWFnZS5oZWlnaHQoaW1hZ2VIZWlnaHQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbWFnZUhlaWdodCA9IG1heEltYWdlSGVpZ2h0O1xuICAgICAgICAgICAgaW1hZ2VXaWR0aCA9IHBhcnNlSW50KHByZWxvYWRlci53aWR0aCAvIChwcmVsb2FkZXIuaGVpZ2h0IC8gaW1hZ2VIZWlnaHQpLCAxMCk7XG4gICAgICAgICAgICAkaW1hZ2Uud2lkdGgoaW1hZ2VXaWR0aCk7XG4gICAgICAgICAgICAkaW1hZ2UuaGVpZ2h0KGltYWdlSGVpZ2h0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHNlbGYuc2l6ZUNvbnRhaW5lcigkaW1hZ2Uud2lkdGgoKSwgJGltYWdlLmhlaWdodCgpKTtcbiAgICB9O1xuXG4gICAgcHJlbG9hZGVyLnNyYyAgICAgICAgICA9IHRoaXMuYWxidW1baW1hZ2VOdW1iZXJdLmxpbms7XG4gICAgdGhpcy5jdXJyZW50SW1hZ2VJbmRleCA9IGltYWdlTnVtYmVyO1xuICB9O1xuXG4gIC8vIFN0cmV0Y2ggb3ZlcmxheSB0byBmaXQgdGhlIHZpZXdwb3J0XG4gIExpZ2h0Ym94LnByb3RvdHlwZS5zaXplT3ZlcmxheSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuJG92ZXJsYXlcbiAgICAgIC53aWR0aCgkKGRvY3VtZW50KS53aWR0aCgpKVxuICAgICAgLmhlaWdodCgkKGRvY3VtZW50KS5oZWlnaHQoKSk7XG4gIH07XG5cbiAgLy8gQW5pbWF0ZSB0aGUgc2l6ZSBvZiB0aGUgbGlnaHRib3ggdG8gZml0IHRoZSBpbWFnZSB3ZSBhcmUgc2hvd2luZ1xuICBMaWdodGJveC5wcm90b3R5cGUuc2l6ZUNvbnRhaW5lciA9IGZ1bmN0aW9uKGltYWdlV2lkdGgsIGltYWdlSGVpZ2h0KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIG9sZFdpZHRoICA9IHRoaXMuJG91dGVyQ29udGFpbmVyLm91dGVyV2lkdGgoKTtcbiAgICB2YXIgb2xkSGVpZ2h0ID0gdGhpcy4kb3V0ZXJDb250YWluZXIub3V0ZXJIZWlnaHQoKTtcbiAgICB2YXIgbmV3V2lkdGggID0gaW1hZ2VXaWR0aCArIHRoaXMuY29udGFpbmVyUGFkZGluZy5sZWZ0ICsgdGhpcy5jb250YWluZXJQYWRkaW5nLnJpZ2h0ICsgdGhpcy5pbWFnZUJvcmRlcldpZHRoLmxlZnQgKyB0aGlzLmltYWdlQm9yZGVyV2lkdGgucmlnaHQ7XG4gICAgdmFyIG5ld0hlaWdodCA9IGltYWdlSGVpZ2h0ICsgdGhpcy5jb250YWluZXJQYWRkaW5nLnRvcCArIHRoaXMuY29udGFpbmVyUGFkZGluZy5ib3R0b20gKyB0aGlzLmltYWdlQm9yZGVyV2lkdGgudG9wICsgdGhpcy5pbWFnZUJvcmRlcldpZHRoLmJvdHRvbTtcblxuICAgIGZ1bmN0aW9uIHBvc3RSZXNpemUoKSB7XG4gICAgICBzZWxmLiRsaWdodGJveC5maW5kKCcubGItZGF0YUNvbnRhaW5lcicpLndpZHRoKG5ld1dpZHRoKTtcbiAgICAgIHNlbGYuJGxpZ2h0Ym94LmZpbmQoJy5sYi1wcmV2TGluaycpLmhlaWdodChuZXdIZWlnaHQpO1xuICAgICAgc2VsZi4kbGlnaHRib3guZmluZCgnLmxiLW5leHRMaW5rJykuaGVpZ2h0KG5ld0hlaWdodCk7XG4gICAgICBzZWxmLnNob3dJbWFnZSgpO1xuICAgIH1cblxuICAgIGlmIChvbGRXaWR0aCAhPT0gbmV3V2lkdGggfHwgb2xkSGVpZ2h0ICE9PSBuZXdIZWlnaHQpIHtcbiAgICAgIHRoaXMuJG91dGVyQ29udGFpbmVyLmFuaW1hdGUoe1xuICAgICAgICB3aWR0aDogbmV3V2lkdGgsXG4gICAgICAgIGhlaWdodDogbmV3SGVpZ2h0XG4gICAgICB9LCB0aGlzLm9wdGlvbnMucmVzaXplRHVyYXRpb24sICdzd2luZycsIGZ1bmN0aW9uKCkge1xuICAgICAgICBwb3N0UmVzaXplKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcG9zdFJlc2l6ZSgpO1xuICAgIH1cbiAgfTtcblxuICAvLyBEaXNwbGF5IHRoZSBpbWFnZSBhbmQgaXRzIGRldGFpbHMgYW5kIGJlZ2luIHByZWxvYWQgbmVpZ2hib3JpbmcgaW1hZ2VzLlxuICBMaWdodGJveC5wcm90b3R5cGUuc2hvd0ltYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLWxvYWRlcicpLnN0b3AodHJ1ZSkuaGlkZSgpO1xuICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1pbWFnZScpLmZhZGVJbih0aGlzLm9wdGlvbnMuaW1hZ2VGYWRlRHVyYXRpb24pO1xuXG4gICAgdGhpcy51cGRhdGVOYXYoKTtcbiAgICB0aGlzLnVwZGF0ZURldGFpbHMoKTtcbiAgICB0aGlzLnByZWxvYWROZWlnaGJvcmluZ0ltYWdlcygpO1xuICAgIHRoaXMuZW5hYmxlS2V5Ym9hcmROYXYoKTtcbiAgfTtcblxuICAvLyBEaXNwbGF5IHByZXZpb3VzIGFuZCBuZXh0IG5hdmlnYXRpb24gaWYgYXBwcm9wcmlhdGUuXG4gIExpZ2h0Ym94LnByb3RvdHlwZS51cGRhdGVOYXYgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdG91Y2ggZXZlbnRzLiBJZiBzbywgd2UgdGFrZSB0aGUgY29uc2VydmF0aXZlIGFwcHJvYWNoXG4gICAgLy8gYW5kIGFzc3VtZSB0aGF0IG1vdXNlIGhvdmVyIGV2ZW50cyBhcmUgbm90IHN1cHBvcnRlZCBhbmQgYWx3YXlzIHNob3cgcHJldi9uZXh0IG5hdmlnYXRpb25cbiAgICAvLyBhcnJvd3MgaW4gaW1hZ2Ugc2V0cy5cbiAgICB2YXIgYWx3YXlzU2hvd05hdiA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBkb2N1bWVudC5jcmVhdGVFdmVudCgnVG91Y2hFdmVudCcpO1xuICAgICAgYWx3YXlzU2hvd05hdiA9ICh0aGlzLm9wdGlvbnMuYWx3YXlzU2hvd05hdk9uVG91Y2hEZXZpY2VzKSA/IHRydWUgOiBmYWxzZTtcbiAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLW5hdicpLnNob3coKTtcblxuICAgIGlmICh0aGlzLmFsYnVtLmxlbmd0aCA+IDEpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMud3JhcEFyb3VuZCkge1xuICAgICAgICBpZiAoYWx3YXlzU2hvd05hdikge1xuICAgICAgICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1wcmV2LCAubGItbmV4dCcpLmNzcygnb3BhY2l0eScsICcxJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLXByZXYsIC5sYi1uZXh0Jykuc2hvdygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEltYWdlSW5kZXggPiAwKSB7XG4gICAgICAgICAgdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLXByZXYnKS5zaG93KCk7XG4gICAgICAgICAgaWYgKGFsd2F5c1Nob3dOYXYpIHtcbiAgICAgICAgICAgIHRoaXMuJGxpZ2h0Ym94LmZpbmQoJy5sYi1wcmV2JykuY3NzKCdvcGFjaXR5JywgJzEnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY3VycmVudEltYWdlSW5kZXggPCB0aGlzLmFsYnVtLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICB0aGlzLiRsaWdodGJveC5maW5kKCcubGItbmV4dCcpLnNob3coKTtcbiAgICAgICAgICBpZiAoYWx3YXlzU2hvd05hdikge1xuICAgICAgICAgICAgdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLW5leHQnKS5jc3MoJ29wYWNpdHknLCAnMScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBEaXNwbGF5IGNhcHRpb24sIGltYWdlIG51bWJlciwgYW5kIGNsb3NpbmcgYnV0dG9uLlxuICBMaWdodGJveC5wcm90b3R5cGUudXBkYXRlRGV0YWlscyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIEVuYWJsZSBhbmNob3IgY2xpY2tzIGluIHRoZSBpbmplY3RlZCBjYXB0aW9uIGh0bWwuXG4gICAgLy8gVGhhbmtzIE5hdGUgV3JpZ2h0IGZvciB0aGUgZml4LiBAaHR0cHM6Ly9naXRodWIuY29tL05hdGVXclxuICAgIGlmICh0eXBlb2YgdGhpcy5hbGJ1bVt0aGlzLmN1cnJlbnRJbWFnZUluZGV4XS50aXRsZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHRoaXMuYWxidW1bdGhpcy5jdXJyZW50SW1hZ2VJbmRleF0udGl0bGUgIT09ICcnKSB7XG4gICAgICB2YXIgJGNhcHRpb24gPSB0aGlzLiRsaWdodGJveC5maW5kKCcubGItY2FwdGlvbicpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5zYW5pdGl6ZVRpdGxlKSB7XG4gICAgICAgICRjYXB0aW9uLnRleHQodGhpcy5hbGJ1bVt0aGlzLmN1cnJlbnRJbWFnZUluZGV4XS50aXRsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkY2FwdGlvbi5odG1sKHRoaXMuYWxidW1bdGhpcy5jdXJyZW50SW1hZ2VJbmRleF0udGl0bGUpO1xuICAgICAgfVxuICAgICAgJGNhcHRpb24uZmFkZUluKCdmYXN0JylcbiAgICAgICAgLmZpbmQoJ2EnKS5vbignY2xpY2snLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIGlmICgkKHRoaXMpLmF0dHIoJ3RhcmdldCcpICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKCQodGhpcykuYXR0cignaHJlZicpLCAkKHRoaXMpLmF0dHIoJ3RhcmdldCcpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9jYXRpb24uaHJlZiA9ICQodGhpcykuYXR0cignaHJlZicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYWxidW0ubGVuZ3RoID4gMSAmJiB0aGlzLm9wdGlvbnMuc2hvd0ltYWdlTnVtYmVyTGFiZWwpIHtcbiAgICAgIHZhciBsYWJlbFRleHQgPSB0aGlzLmltYWdlQ291bnRMYWJlbCh0aGlzLmN1cnJlbnRJbWFnZUluZGV4ICsgMSwgdGhpcy5hbGJ1bS5sZW5ndGgpO1xuICAgICAgdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLW51bWJlcicpLnRleHQobGFiZWxUZXh0KS5mYWRlSW4oJ2Zhc3QnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kbGlnaHRib3guZmluZCgnLmxiLW51bWJlcicpLmhpZGUoKTtcbiAgICB9XG5cbiAgICB0aGlzLiRvdXRlckNvbnRhaW5lci5yZW1vdmVDbGFzcygnYW5pbWF0aW5nJyk7XG5cbiAgICB0aGlzLiRsaWdodGJveC5maW5kKCcubGItZGF0YUNvbnRhaW5lcicpLmZhZGVJbih0aGlzLm9wdGlvbnMucmVzaXplRHVyYXRpb24sIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNlbGYuc2l6ZU92ZXJsYXkoKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBQcmVsb2FkIHByZXZpb3VzIGFuZCBuZXh0IGltYWdlcyBpbiBzZXQuXG4gIExpZ2h0Ym94LnByb3RvdHlwZS5wcmVsb2FkTmVpZ2hib3JpbmdJbWFnZXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5hbGJ1bS5sZW5ndGggPiB0aGlzLmN1cnJlbnRJbWFnZUluZGV4ICsgMSkge1xuICAgICAgdmFyIHByZWxvYWROZXh0ID0gbmV3IEltYWdlKCk7XG4gICAgICBwcmVsb2FkTmV4dC5zcmMgPSB0aGlzLmFsYnVtW3RoaXMuY3VycmVudEltYWdlSW5kZXggKyAxXS5saW5rO1xuICAgIH1cbiAgICBpZiAodGhpcy5jdXJyZW50SW1hZ2VJbmRleCA+IDApIHtcbiAgICAgIHZhciBwcmVsb2FkUHJldiA9IG5ldyBJbWFnZSgpO1xuICAgICAgcHJlbG9hZFByZXYuc3JjID0gdGhpcy5hbGJ1bVt0aGlzLmN1cnJlbnRJbWFnZUluZGV4IC0gMV0ubGluaztcbiAgICB9XG4gIH07XG5cbiAgTGlnaHRib3gucHJvdG90eXBlLmVuYWJsZUtleWJvYXJkTmF2ID0gZnVuY3Rpb24oKSB7XG4gICAgJChkb2N1bWVudCkub24oJ2tleXVwLmtleWJvYXJkJywgJC5wcm94eSh0aGlzLmtleWJvYXJkQWN0aW9uLCB0aGlzKSk7XG4gIH07XG5cbiAgTGlnaHRib3gucHJvdG90eXBlLmRpc2FibGVLZXlib2FyZE5hdiA9IGZ1bmN0aW9uKCkge1xuICAgICQoZG9jdW1lbnQpLm9mZignLmtleWJvYXJkJyk7XG4gIH07XG5cbiAgTGlnaHRib3gucHJvdG90eXBlLmtleWJvYXJkQWN0aW9uID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIgS0VZQ09ERV9FU0MgICAgICAgID0gMjc7XG4gICAgdmFyIEtFWUNPREVfTEVGVEFSUk9XICA9IDM3O1xuICAgIHZhciBLRVlDT0RFX1JJR0hUQVJST1cgPSAzOTtcblxuICAgIHZhciBrZXljb2RlID0gZXZlbnQua2V5Q29kZTtcbiAgICB2YXIga2V5ICAgICA9IFN0cmluZy5mcm9tQ2hhckNvZGUoa2V5Y29kZSkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoa2V5Y29kZSA9PT0gS0VZQ09ERV9FU0MgfHwga2V5Lm1hdGNoKC94fG98Yy8pKSB7XG4gICAgICB0aGlzLmVuZCgpO1xuICAgIH0gZWxzZSBpZiAoa2V5ID09PSAncCcgfHwga2V5Y29kZSA9PT0gS0VZQ09ERV9MRUZUQVJST1cpIHtcbiAgICAgIGlmICh0aGlzLmN1cnJlbnRJbWFnZUluZGV4ICE9PSAwKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UodGhpcy5jdXJyZW50SW1hZ2VJbmRleCAtIDEpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMud3JhcEFyb3VuZCAmJiB0aGlzLmFsYnVtLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZSh0aGlzLmFsYnVtLmxlbmd0aCAtIDEpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoa2V5ID09PSAnbicgfHwga2V5Y29kZSA9PT0gS0VZQ09ERV9SSUdIVEFSUk9XKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50SW1hZ2VJbmRleCAhPT0gdGhpcy5hbGJ1bS5sZW5ndGggLSAxKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UodGhpcy5jdXJyZW50SW1hZ2VJbmRleCArIDEpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMud3JhcEFyb3VuZCAmJiB0aGlzLmFsYnVtLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZSgwKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gQ2xvc2luZyB0aW1lLiA6LShcbiAgTGlnaHRib3gucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZGlzYWJsZUtleWJvYXJkTmF2KCk7XG4gICAgJCh3aW5kb3cpLm9mZigncmVzaXplJywgdGhpcy5zaXplT3ZlcmxheSk7XG4gICAgdGhpcy4kbGlnaHRib3guZmFkZU91dCh0aGlzLm9wdGlvbnMuZmFkZUR1cmF0aW9uKTtcbiAgICB0aGlzLiRvdmVybGF5LmZhZGVPdXQodGhpcy5vcHRpb25zLmZhZGVEdXJhdGlvbik7XG4gICAgJCgnc2VsZWN0LCBvYmplY3QsIGVtYmVkJykuY3NzKHtcbiAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJ1xuICAgIH0pO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZVNjcm9sbGluZykge1xuICAgICAgJCgnaHRtbCcpLnJlbW92ZUNsYXNzKCdsYi1kaXNhYmxlLXNjcm9sbGluZycpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gbmV3IExpZ2h0Ym94KCk7XG59KSk7XG4iXX0=
